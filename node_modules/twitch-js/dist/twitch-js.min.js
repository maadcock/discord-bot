(function(e,t){'object'==typeof exports&&'object'==typeof module?module.exports=t():'function'==typeof define&&define.amd?define('TwitchJs',[],t):'object'==typeof exports?exports.TwitchJs=t():e.TwitchJs=t()})('undefined'==typeof self?this:self,function(){var e=Math.max,t=Math.floor,n=Math.pow,r=String.fromCharCode,o=Math.min;return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(n,'a',n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=87)}([function(e){e.exports='function'==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e){function t(){throw new Error('setTimeout has not been defined')}function n(){throw new Error('clearTimeout has not been defined')}function r(e){if(u===setTimeout)return setTimeout(e,0);if((u===t||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(e){if(p===clearTimeout)return clearTimeout(e);if((p===n||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function a(){f&&g&&(f=!1,g.length?c=g.concat(c):_=-1,c.length&&s())}function s(){if(!f){var e=r(a);f=!0;for(var t=c.length;t;){for(g=c,c=[];++_<t;)g&&g[_].run();_=-1,t=c.length}g=null,f=!1,o(e)}}function d(e,t){this.fun=e,this.array=t}function i(){}var l=e.exports={},u,p;(function(){try{u='function'==typeof setTimeout?setTimeout:t}catch(n){u=t}try{p='function'==typeof clearTimeout?clearTimeout:n}catch(t){p=n}})();var c=[],f=!1,_=-1,g;l.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new d(e,t)),1!==c.length||f||r(s)},d.prototype.run=function(){this.fun.apply(null,this.array)},l.title='browser',l.browser=!0,l.env={},l.argv=[],l.version='',l.versions={},l.on=i,l.addListener=i,l.once=i,l.off=i,l.removeListener=i,l.removeAllListeners=i,l.emit=i,l.prependListener=i,l.prependOnceListener=i,l.listeners=function(){return[]},l.binding=function(){throw new Error('process.binding is not supported')},l.cwd=function(){return'/'},l.chdir=function(){throw new Error('process.chdir is not supported')},l.umask=function(){return 0}},function(e){var t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(n){'object'==typeof window&&(t=window)}e.exports=t},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var n=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++)for(var r in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e};const r=t.CHAT_SERVER='irc-ws.chat.twitch.tv',o=t.CHAT_SERVER_PORT=6667,a=t.CHAT_SERVER_SSL_PORT=443,s=t.CONNECTION_TIMEOUT=5e3,i=t.KEEP_ALIVE_PING_TIMEOUT=55e3,d=t.KEEP_ALIVE_RECONNECT_TIMEOUT=6e4,l=t.JOIN_TIMEOUT=1e3,u=t.COMMAND_TIMEOUT=1e3,p=t.CLIENT_PRIORITY=100,c=t.RATE_LIMIT_USER=20,f=t.RATE_LIMIT_MODERATOR=100,_=t.RATE_LIMIT_KNOWN_BOT=50,g=t.RATE_LIMIT_VERIFIED_BOT=7500,h=t.ERROR_CONNECT_TIMED_OUT='ERROR: connect timed out',m=t.ERROR_CONNECTION_IN_PROGRESS='ERROR: connection in progress',y=t.ERROR_JOIN_TIMED_OUT='ERROR: join timed out',E=t.ERROR_SAY_TIMED_OUT='ERROR: say timed out',b=t.ERROR_COMMAND_TIMED_OUT='ERROR: command timed out',S=t.ERROR_COMMAND_UNRECOGNIZED='ERROR: command unrecognized',T=t.ERROR_PART_TIMED_OUT='ERROR: part timed out',O=t.MESSAGE_PARAMETER_PREFIX='msgParam',A=t.MESSAGE_PARAMETER_PREFIX_RE=new RegExp(`^${O}(\\w+)`),R=t.PRIVATE_MESSAGE_HOSTED_RE=/:.+@jtv\.tmi\.twitch\.tv PRIVMSG #?(\w+) :(\w+) is now (?:(auto) )?hosting[A-z ]+(\d+)?/,I=t.ANONYMOUS_USERNAME='justinfan',x=t.ANONYMOUS_USERNAME_RE=new RegExp(`^${I}(\\d+)$`),N=t.READY_STATES={0:'NOT_READY',1:'CONNECTING',2:'RECONNECTING',3:'CONNECTED',4:'DISCONNECTING',5:'DISCONNECTED'},k=t.CAPABILITIES=['twitch.tv/tags','twitch.tv/commands','twitch.tv/membership'],w=t.MEMBERSHIP_COMMANDS={JOIN:'JOIN',MODE:'MODE',PART:'PART',NAMES:'353',NAMES_END:'366'},M=t.TAG_COMMANDS={CLEAR_CHAT:'CLEARCHAT',GLOBAL_USER_STATE:'GLOBALUSERSTATE',PRIVATE_MESSAGE:'PRIVMSG',ROOM_STATE:'ROOMSTATE',USER_NOTICE:'USERNOTICE',USER_STATE:'USERSTATE'},v=t.OTHER_COMMANDS={WELCOME:'001',PING:'PING',PONG:'PONG',WHISPER:'PRIVMSG #jtv'},C=t.COMMANDS=n({},v,w,M,{CLEAR_CHAT:'CLEARCHAT',HOST_TARGET:'HOSTTARGET',NOTICE:'NOTICE',RECONNECT:'RECONNECT',ROOM_STATE:'ROOMSTATE',USER_NOTICE:'USERNOTICE',USER_STATE:'USERSTATE'}),D=t.NOTICE_MESSAGE_IDS={ALREADY_BANNED:'already_banned',ALREADY_EMOTE_ONLY_OFF:'already_emote_only_off',ALREADY_EMOTE_ONLY_ON:'already_emote_only_on',ALREADY_R9K_OFF:'already_r9k_off',ALREADY_R9K_ON:'already_r9k_on',ALREADY_SUBS_OFF:'already_subs_off',ALREADY_SUBS_ON:'already_subs_on',BAD_HOST_HOSTING:'bad_host_hosting',BAN_SUCCESS:'ban_success',BAD_UNBAN_NO_BAN:'bad_unban_no_ban',COLOR_CHANGED:'color_changed',CMDS_AVAILABLE:'cmds_available',COMMERCIAL_SUCCESS:'commercial_success',EMOTE_ONLY_OFF:'emote_only_off',EMOTE_ONLY_ON:'emote_only_on',FOLLOWERS_OFF:'followers_off',FOLLOWERS_ON:'followers_on',FOLLOWERS_ON_ZERO:'followers_on_zero',HOST_OFF:'host_off',HOST_ON:'host_on',HOSTS_REMAINING:'hosts_remaining',MSG_CHANNEL_SUSPENDED:'msg_channel_suspended',R9K_OFF:'r9k_off',R9K_ON:'r9k_on',ROOM_MODS:'room_mods',SLOW_OFF:'slow_off',SLOW_ON:'slow_on',SUBS_OFF:'subs_off',SUBS_ON:'subs_on',TIMEOUT_SUCCESS:'timeout_success',UNBAN_SUCCESS:'unban_success',UNRAID_SUCCESS:'unraid_succss',UNRECOGNIZED_COMMAND:'unrecognized_cmd'},P=t.USER_NOTICE_MESSAGE_IDS={ANON_GIFT_PAID_UPGRADE:'anongiftpaidupgrade',GIFT_PAID_UPGRADE:'giftpaidupgrade',RAID:'raid',RESUBSCRIPTION:'resub',RITUAL:'ritual',SUBSCRIPTION:'sub',SUBSCRIPTION_GIFT:'subgift',SUBSCRIPTION_GIFT_COMMUNITY:'submysterygift'},L=t.MESSAGE_IDS=n({},D,P),U=t.EVENTS=n({},Object.keys(D).reduce((e,t)=>n({},e,{[t]:`${C.NOTICE}/${t}`}),{}),C,{RAW:'RAW',ALL:'*',CONNECTED:'CONNECTED',DISCONNECTED:'DISCONNECTED',AUTHENTICATION_FAILED:'AUTHENTICATION_FAILED',ERROR_ENCOUNTERED:'ERROR_ENCOUNTERED',PARSE_ERROR_ENCOUNTERED:'PARSE_ERROR_ENCOUNTERED',ANON_GIFT_PAID_UPGRADE:'ANON_GIFT_PAID_UPGRADE',GIFT_PAID_UPGRADE:'GIFT_PAID_UPGRADE',RAID:'RAID',RESUBSCRIPTION:'RESUBSCRIPTION',RITUAL:'RITUAL',SUBSCRIPTION:'SUBSCRIPTION',SUBSCRIPTION_GIFT:'SUBSCRIPTION_GIFT',SUBSCRIPTION_GIFT_COMMUNITY:'SUBSCRIPTION_GIFT_COMMUNITY',MOD_GAINED:'MOD_GAINED',MOD_LOST:'MOD_LOST',USER_BANNED:'USER_BANNED',CHEER:'CHEER',HOSTED:'HOSTED',HOSTED_WITHOUT_VIEWERS:'HOSTED/WITHOUT_VIEWERS',HOSTED_WITH_VIEWERS:'HOSTED/WITH_VIEWERS',HOSTED_AUTO:'HOSTED/AUTO'}),B=t.CHAT_COMMANDS={BAN:'ban',CLEAR:'clear',COLOR:'color',COMMERCIAL:'commercial',EMOTE_ONLY:'emoteonly',EMOTE_ONLY_OFF:'emoteonlyoff',FOLLOWERS_ONLY:'followers',FOLLOWERS_ONLY_OFF:'followersoff',HELP:'help',HOST:'host',MARKER:'marker',ME:'me',MOD:'mod',MODS:'mods',R9K:'r9kbeta',R9K_OFF:'r9kbetaoff',RAID:'raid',SLOW:'slow',SLOW_OFF:'slowoff',SUBSCRIBERS:'subscribers',SUBSCRIBERS_OFF:'subscribersoff',TIMEOUT:'timeout',UNBAN:'unban',UNHOST:'unhost',UNMOD:'unmod',UNRAID:'unraid'}},function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):'[object Array]'===n(e)},t.isBoolean=function(e){return'boolean'==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return'number'==typeof e},t.isString=function(e){return'string'==typeof e},t.isSymbol=function(e){return'symbol'==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return'[object RegExp]'===n(e)},t.isObject=function(e){return'object'==typeof e&&null!==e},t.isDate=function(e){return'[object Date]'===n(e)},t.isError=function(t){return'[object Error]'===n(t)||t instanceof Error},t.isFunction=function(e){return'function'==typeof e},t.isPrimitive=function(e){return null===e||'boolean'==typeof e||'number'==typeof e||'string'==typeof e||'symbol'==typeof e||'undefined'==typeof e},t.isBuffer=e.isBuffer}).call(t,n(16).Buffer)},function(e){var t=Array.isArray;e.exports=t},function(e,t,n){var r=n(93);e.exports=function(e){return null==e?'':r(e)}},function(e){function t(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return'function'==typeof e}function r(e){return'number'==typeof e}function o(e){return'object'==typeof e&&null!==e}function a(e){return void 0===e}e.exports=t,t.EventEmitter=t,t.prototype._events=void 0,t.prototype._maxListeners=void 0,t.defaultMaxListeners=10,t.prototype.setMaxListeners=function(e){if(!r(e)||0>e||isNaN(e))throw TypeError('n must be a positive number');return this._maxListeners=e,this},t.prototype.emit=function(e){var t,r,s,d,l,i;if(this._events||(this._events={}),'error'===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length))if(t=arguments[1],t instanceof Error)throw t;else{var u=new Error('Uncaught, unspecified "error" event. ('+t+')');throw u.context=t,u}if(r=this._events[e],a(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:d=Array.prototype.slice.call(arguments,1),r.apply(this,d);}else if(o(r))for(d=Array.prototype.slice.call(arguments,1),i=r.slice(),s=i.length,l=0;l<s;l++)i[l].apply(this,d);return!0},t.prototype.addListener=function(e,r){var s;if(!n(r))throw TypeError('listener must be a function');return this._events||(this._events={}),this._events.newListener&&this.emit('newListener',e,n(r.listener)?r.listener:r),this._events[e]?o(this._events[e])?this._events[e].push(r):this._events[e]=[this._events[e],r]:this._events[e]=r,o(this._events[e])&&!this._events[e].warned&&(s=a(this._maxListeners)?t.defaultMaxListeners:this._maxListeners,s&&0<s&&this._events[e].length>s&&(this._events[e].warned=!0,console.error('(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.',this._events[e].length),'function'==typeof console.trace&&console.trace())),this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(e,t){function r(){this.removeListener(e,r),o||(o=!0,t.apply(this,arguments))}if(!n(t))throw TypeError('listener must be a function');var o=!1;return r.listener=t,this.on(e,r),this},t.prototype.removeListener=function(e,t){var r,a,s,d;if(!n(t))throw TypeError('listener must be a function');if(!this._events||!this._events[e])return this;if(r=this._events[e],s=r.length,a=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit('removeListener',e,t);else if(o(r)){for(d=s;0<d--;)if(r[d]===t||r[d].listener&&r[d].listener===t){a=d;break}if(0>a)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(a,1),this._events.removeListener&&this.emit('removeListener',e,t)}return this},t.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)'removeListener'!==t&&this.removeAllListeners(t);return this.removeAllListeners('removeListener'),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},t.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[],t},t.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},t.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){'use strict';function r(e){return this instanceof r?void(l.call(this,e),u.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once('end',o)):new r(e)}function o(){this.allowHalfOpen||this._writableState.ended||s.nextTick(a,this)}function a(e){e.end()}var s=n(17),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=r;var d=n(4);d.inherits=n(0);var l=n(67),u=n(33);d.inherits(r,l);for(var p=i(u.prototype),c=0,f;c<p.length;c++)f=p[c],r.prototype[f]||(r.prototype[f]=u.prototype[f]);Object.defineProperty(r.prototype,'writableHighWaterMark',{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,'destroyed',{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),r.prototype._destroy=function(e,t){this.push(null),this.end(),s.nextTick(t,e)}},function(e){e.exports=function(e){var t=typeof e;return null!=e&&('object'==t||'function'==t)}},function(e,t,n){(function(e,r){function o(e,n){var r={seen:[],stylize:s};return 3<=arguments.length&&(r.depth=arguments[2]),4<=arguments.length&&(r.colors=arguments[3]),g(n)?r.showHidden=n:n&&t._extend(r,n),E(r.showHidden)&&(r.showHidden=!1),E(r.depth)&&(r.depth=2),E(r.colors)&&(r.colors=!1),E(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=a),d(r,e,r.depth)}function a(e,t){var n=o.styles[t];return n?'\x1B['+o.colors[n][0]+'m'+e+'\x1B['+o.colors[n][1]+'m':e}function s(e){return e}function i(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function d(e,r,o){if(e.customInspect&&r&&A(r.inspect)&&r.inspect!==t.inspect&&!(r.constructor&&r.constructor.prototype===r)){var a=r.inspect(o,e);return y(a)||(a=d(e,a,o)),a}var s=l(e,r);if(s)return s;var g=Object.keys(r),h=i(g);if(e.showHidden&&(g=Object.getOwnPropertyNames(r)),O(r)&&(0<=g.indexOf('message')||0<=g.indexOf('description')))return u(r);if(0===g.length){if(A(r)){var m=r.name?': '+r.name:'';return e.stylize('[Function'+m+']','special')}if(b(r))return e.stylize(RegExp.prototype.toString.call(r),'regexp');if(T(r))return e.stylize(Date.prototype.toString.call(r),'date');if(O(r))return u(r)}var E='',S=!1,R=['{','}'];if(_(r)&&(S=!0,R=['[',']']),A(r)){var I=r.name?': '+r.name:'';E=' [Function'+I+']'}if(b(r)&&(E=' '+RegExp.prototype.toString.call(r)),T(r)&&(E=' '+Date.prototype.toUTCString.call(r)),O(r)&&(E=' '+u(r)),0===g.length&&(!S||0==r.length))return R[0]+E+R[1];if(0>o)return b(r)?e.stylize(RegExp.prototype.toString.call(r),'regexp'):e.stylize('[Object]','special');e.seen.push(r);var n;return n=S?p(e,r,o,h,g):g.map(function(t){return c(e,r,o,h,t,S)}),e.seen.pop(),f(n,E,R)}function l(e,t){if(E(t))return e.stylize('undefined','undefined');if(y(t)){var n='\''+JSON.stringify(t).replace(/^"|"$/g,'').replace(/'/g,'\\\'').replace(/\\"/g,'"')+'\'';return e.stylize(n,'string')}return m(t)?e.stylize(''+t,'number'):g(t)?e.stylize(''+t,'boolean'):h(t)?e.stylize('null','null'):void 0}function u(e){return'['+Error.prototype.toString.call(e)+']'}function p(e,t,n,r,o){for(var a=[],s=0,i=t.length;s<i;++s)N(t,s+'')?a.push(c(e,t,n,r,s+'',!0)):a.push('');return o.forEach(function(o){o.match(/^\d+$/)||a.push(c(e,t,n,r,o,!0))}),a}function c(e,t,n,r,o,a){var s,i,l;if(l=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},l.get?l.set?i=e.stylize('[Getter/Setter]','special'):i=e.stylize('[Getter]','special'):l.set&&(i=e.stylize('[Setter]','special')),N(r,o)||(s='['+o+']'),i||(0>e.seen.indexOf(l.value)?(i=h(n)?d(e,l.value,null):d(e,l.value,n-1),-1<i.indexOf('\n')&&(a?i=i.split('\n').map(function(e){return'  '+e}).join('\n').substr(2):i='\n'+i.split('\n').map(function(e){return'   '+e}).join('\n'))):i=e.stylize('[Circular]','special')),E(s)){if(a&&o.match(/^\d+$/))return i;s=JSON.stringify(''+o),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,'name')):(s=s.replace(/'/g,'\\\'').replace(/\\"/g,'"').replace(/(^"|"$)/g,'\''),s=e.stylize(s,'string'))}return s+': '+i}function f(e,t,n){var r=0,o=e.reduce(function(e,t){return r++,0<=t.indexOf('\n')&&r++,e+t.replace(/\u001b\[\d\d?m/g,'').length+1},0);return 60<o?n[0]+(''===t?'':t+'\n ')+' '+e.join(',\n  ')+' '+n[1]:n[0]+t+' '+e.join(', ')+' '+n[1]}function _(e){return Array.isArray(e)}function g(e){return'boolean'==typeof e}function h(e){return null===e}function m(e){return'number'==typeof e}function y(e){return'string'==typeof e}function E(e){return void 0===e}function b(e){return S(e)&&'[object RegExp]'===R(e)}function S(e){return'object'==typeof e&&null!==e}function T(e){return S(e)&&'[object Date]'===R(e)}function O(t){return S(t)&&('[object Error]'===R(t)||t instanceof Error)}function A(e){return'function'==typeof e}function R(e){return Object.prototype.toString.call(e)}function I(e){return 10>e?'0'+e.toString(10):e.toString(10)}function x(){var e=new Date,t=[I(e.getHours()),I(e.getMinutes()),I(e.getSeconds())].join(':');return[e.getDate(),v[e.getMonth()],t].join(' ')}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var k=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(o(arguments[n]));return t.join(' ')}for(var n=1,r=arguments,a=r.length,s=(e+'').replace(k,function(e){if('%%'===e)return'%';if(n>=a)return e;switch(e){case'%s':return r[n++]+'';case'%d':return+r[n++];case'%j':try{return JSON.stringify(r[n++])}catch(e){return'[Circular]'}default:return e;}}),i=r[n];n<a;i=r[++n])s+=h(i)||!S(i)?' '+i:' '+o(i);return s},t.deprecate=function(n,o){function a(){if(!s){if(r.throwDeprecation)throw new Error(o);else r.traceDeprecation?console.trace(o):console.error(o);s=!0}return n.apply(this,arguments)}if(E(e.process))return function(){return t.deprecate(n,o).apply(this,arguments)};if(!0===r.noDeprecation)return n;var s=!1;return a};var w={},M;t.debuglog=function(e){if(E(M)&&(M=r.env.NODE_DEBUG||''),e=e.toUpperCase(),!w[e])if(new RegExp('\\b'+e+'\\b','i').test(M)){var n=r.pid;w[e]=function(){var r=t.format.apply(t,arguments);console.error('%s %d: %s',e,n,r)}}else w[e]=function(){};return w[e]},t.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:'cyan',number:'yellow',boolean:'yellow',undefined:'grey',null:'bold',string:'green',date:'magenta',regexp:'red'},t.isArray=_,t.isBoolean=g,t.isNull=h,t.isNullOrUndefined=function(e){return null==e},t.isNumber=m,t.isString=y,t.isSymbol=function(e){return'symbol'==typeof e},t.isUndefined=E,t.isRegExp=b,t.isObject=S,t.isDate=T,t.isError=O,t.isFunction=A,t.isPrimitive=function(e){return null===e||'boolean'==typeof e||'number'==typeof e||'string'==typeof e||'symbol'==typeof e||'undefined'==typeof e},t.isBuffer=n(108);var v=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];t.log=function(){console.log('%s - %s',x(),t.format.apply(t,arguments))},t.inherits=n(0),t._extend=function(e,t){if(!t||!S(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,n(2),n(1))},function(e){e.exports=function(){return!1}},function(e,t,n){var r=n(95),o='object'==typeof self&&self&&self.Object===Object&&self,a=r||o||Function('return this')();e.exports=a},function(e){var t=e.exports='undefined'!=typeof window&&window.Math==Math?window:'undefined'!=typeof self&&self.Math==Math?self:Function('return this')();'number'==typeof __g&&(__g=t)},function(e,t,n){var r=n(15),o=n(9);e.exports=function(e){if(!o(e))return!1;var t=r(e);return t=='[object Function]'||t=='[object GeneratorFunction]'||t=='[object AsyncFunction]'||t=='[object Proxy]'}},function(e){var t=Object.prototype,n=t.toString;e.exports=function(e){return n.call(e)}},function(e,a,s){'use strict';(function(e){function i(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function d(e,t){if(i()<t)throw new RangeError('Invalid typed array length');return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=l.prototype):(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(e,t,n);if('number'==typeof e){if('string'==typeof t)throw new Error('If encoding is specified then the first argument must be a string');return f(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if('number'==typeof t)throw new TypeError('"value" argument must not be a number');return'undefined'!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,n,r):'string'==typeof t?_(e,t,n):m(e,t)}function p(e){if('number'!=typeof e)throw new TypeError('"size" argument must be a number');else if(0>e)throw new RangeError('"size" argument must not be negative')}function c(e,t,n,r){return p(t),0>=t?d(e,t):void 0===n?d(e,t):'string'==typeof r?d(e,t).fill(n,r):d(e,t).fill(n)}function f(e,t){if(p(t),e=d(e,0>t?0:0|y(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function _(e,t,n){if(('string'!=typeof n||''===n)&&(n='utf8'),!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|E(t,n);e=d(e,r);var o=e.write(t,n);return o!==r&&(e=e.slice(0,o)),e}function g(e,t){var n=0>t.length?0:0|y(t.length);e=d(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e,t,n,r){if(t.byteLength,0>n||t.byteLength<n)throw new RangeError('\'offset\' is out of bounds');if(t.byteLength<n+(r||0))throw new RangeError('\'length\' is out of bounds');return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),l.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=l.prototype):e=g(e,t),e}function m(e,t){if(l.isBuffer(t)){var n=0|y(t.length);return(e=d(e,n),0===e.length)?e:(t.copy(e,0,0,n),e)}if(t){if('undefined'!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||'length'in t)return'number'!=typeof t.length||X(t.length)?d(e,0):g(e,t);if('Buffer'===t.type&&te(t.data))return g(e,t.data)}throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')}function y(e){if(e>=i())throw new RangeError('Attempt to allocate Buffer larger than maximum size: 0x'+i().toString(16)+' bytes');return 0|e}function E(e,t){if(l.isBuffer(e))return e.length;if('undefined'!=typeof ArrayBuffer&&'function'==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;'string'!=typeof e&&(e=''+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case'ascii':case'latin1':case'binary':return n;case'utf8':case'utf-8':case void 0:return z(e).length;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return 2*n;case'hex':return n>>>1;case'base64':return J(e).length;default:if(r)return z(e).length;t=(''+t).toLowerCase(),r=!0;}}function b(e,t,n){var r=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return'';if((void 0===n||n>this.length)&&(n=this.length),0>=n)return'';if(n>>>=0,t>>>=0,n<=t)return'';for(e||(e='utf8');;)switch(e){case'hex':return P(this,t,n);case'utf8':case'utf-8':return M(this,t,n);case'ascii':return C(this,t,n);case'latin1':case'binary':return D(this,t,n);case'base64':return w(this,t,n);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return L(this,t,n);default:if(r)throw new TypeError('Unknown encoding: '+e);e=(e+'').toLowerCase(),r=!0;}}function S(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function T(e,t,n,r,o){if(0===e.length)return-1;if('string'==typeof n?(r=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),0>n&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(0>n)if(o)n=0;else return-1;if('string'==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:O(e,t,n,r,o);if('number'==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&'function'==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):O(e,[t],n,r,o);throw new TypeError('val must be string, number or Buffer')}function O(e,t,n,r,o){function a(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,d=e.length,l=t.length;if(void 0!==r&&(r=(r+'').toLowerCase(),'ucs2'===r||'ucs-2'===r||'utf16le'===r||'utf-16le'===r)){if(2>e.length||2>t.length)return-1;s=2,d/=2,l/=2,n/=2}var u;if(o){var i=-1;for(u=n;u<d;u++)if(a(e,u)!==a(t,-1==i?0:u-i))-1!=i&&(u-=u-i),i=-1;else if(-1==i&&(i=u),u-i+1===l)return i*s}else for(n+l>d&&(n=d-l),u=n;0<=u;u--){for(var p=!0,c=0;c<l;c++)if(a(e,u+c)!==a(t,c)){p=!1;break}if(p)return u}return-1}function A(e,t,n,r){n=+n||0;var o=e.length-n;r?(r=+r,r>o&&(r=o)):r=o;var a=t.length;if(0!=a%2)throw new TypeError('Invalid hex string');r>a/2&&(r=a/2);for(var s=0,i;s<r;++s){if(i=parseInt(t.substr(2*s,2),16),isNaN(i))return s;e[n+s]=i}return s}function R(e,t,n,r){return Z(z(t,e.length-n),e,n,r)}function I(e,t,n,r){return Z(K(t),e,n,r)}function x(e,t,n,r){return I(e,t,n,r)}function N(e,t,n,r){return Z(J(t),e,n,r)}function k(e,t,n,r){return Z(Q(t,e.length-n),e,n,r)}function w(e,t,n){return 0===t&&n===e.length?$.fromByteArray(e):$.fromByteArray(e.slice(t,n))}function M(e,t,n){n=o(e.length,n);for(var r=[],a=t;a<n;){var s=e[a],i=null,d=239<s?4:223<s?3:191<s?2:1;if(a+d<=n){var l,u,p,c;1==d?128>s&&(i=s):2==d?(l=e[a+1],128==(192&l)&&(c=(31&s)<<6|63&l,127<c&&(i=c))):3==d?(l=e[a+1],u=e[a+2],128==(192&l)&&128==(192&u)&&(c=(15&s)<<12|(63&l)<<6|63&u,2047<c&&(55296>c||57343<c)&&(i=c))):4==d?(l=e[a+1],u=e[a+2],p=e[a+3],128==(192&l)&&128==(192&u)&&128==(192&p)&&(c=(15&s)<<18|(63&l)<<12|(63&u)<<6|63&p,65535<c&&1114112>c&&(i=c))):void 0}null===i?(i=65533,d=1):65535<i&&(i-=65536,r.push(55296|1023&i>>>10),i=56320|1023&i),r.push(i),a+=d}return v(r)}function v(e){var t=e.length;if(t<=ne)return r.apply(String,e);for(var n='',o=0;o<t;)n+=r.apply(String,e.slice(o,o+=ne));return n}function C(e,t,n){var a='';n=o(e.length,n);for(var s=t;s<n;++s)a+=r(127&e[s]);return a}function D(e,t,n){var a='';n=o(e.length,n);for(var s=t;s<n;++s)a+=r(e[s]);return a}function P(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var o='',a=t;a<n;++a)o+=q(e[a]);return o}function L(e,t,n){for(var o=e.slice(t,n),a='',s=0;s<o.length;s+=2)a+=r(o[s]+256*o[s+1]);return a}function U(e,t,n){if(0!=e%1||0>e)throw new RangeError('offset is not uint');if(e+t>n)throw new RangeError('Trying to access beyond buffer length')}function B(e,t,n,r,o,a){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError('Index out of range')}function F(e,t,n,r){0>t&&(t=65535+t+1);for(var a=0,s=o(e.length-n,2);a<s;++a)e[n+a]=(t&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function j(e,t,n,r){0>t&&(t=4294967295+t+1);for(var a=0,s=o(e.length-n,4);a<s;++a)e[n+a]=255&t>>>8*(r?a:3-a)}function H(e,t,n,r){if(n+r>e.length)throw new RangeError('Index out of range');if(0>n)throw new RangeError('Index out of range')}function V(e,t,n,r,o){return o||H(e,t,n,4,34028234663852886e22,-34028234663852886e22),ee.write(e,t,n,r,23,4),n+4}function W(e,t,n,r,o){return o||H(e,t,n,8,17976931348623157e292,-17976931348623157e292),ee.write(e,t,n,r,52,8),n+8}function G(e){if(e=Y(e).replace(re,''),2>e.length)return'';for(;0!=e.length%4;)e+='=';return e}function Y(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,'')}function q(e){return 16>e?'0'+e.toString(16):e.toString(16)}function z(e,t){t=t||Infinity;for(var n=e.length,r=null,o=[],a=0,s;a<n;++a){if(s=e.charCodeAt(a),55295<s&&57344>s){if(!r){if(56319<s){-1<(t-=3)&&o.push(239,191,189);continue}else if(a+1===n){-1<(t-=3)&&o.push(239,191,189);continue}r=s;continue}if(56320>s){-1<(t-=3)&&o.push(239,191,189),r=s;continue}s=(r-55296<<10|s-56320)+65536}else r&&-1<(t-=3)&&o.push(239,191,189);if(r=null,128>s){if(0>(t-=1))break;o.push(s)}else if(2048>s){if(0>(t-=2))break;o.push(192|s>>6,128|63&s)}else if(65536>s){if(0>(t-=3))break;o.push(224|s>>12,128|63&s>>6,128|63&s)}else if(1114112>s){if(0>(t-=4))break;o.push(240|s>>18,128|63&s>>12,128|63&s>>6,128|63&s)}else throw new Error('Invalid code point')}return o}function K(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function Q(e,t){for(var n=[],r=0,o,a,s;r<e.length&&!(0>(t-=2));++r)o=e.charCodeAt(r),a=o>>8,s=o%256,n.push(s),n.push(a);return n}function J(e){return $.toByteArray(G(e))}function Z(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function X(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var $=s(140),ee=s(141),te=s(65);a.Buffer=l,a.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},a.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=e.TYPED_ARRAY_SUPPORT===void 0?function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&'function'==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}():e.TYPED_ARRAY_SUPPORT,a.kMaxLength=i(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return u(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,'undefined'!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return c(null,e,t,n)},l.allocUnsafe=function(e){return f(null,e)},l.allocUnsafeSlow=function(e){return f(null,e)},l.isBuffer=function(e){return!!(null!=e&&e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('Arguments must be Buffers');if(e===t)return 0;for(var n=e.length,r=t.length,a=0,s=o(n,r);a<s;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch((e+'').toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'latin1':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return!0;default:return!1;}},l.concat=function(e,t){if(!te(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var a=e[n];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},l.byteLength=E,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError('Buffer size must be a multiple of 16-bits');for(var t=0;t<e;t+=2)S(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError('Buffer size must be a multiple of 32-bits');for(var t=0;t<e;t+=4)S(this,t,t+3),S(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError('Buffer size must be a multiple of 64-bits');for(var t=0;t<e;t+=8)S(this,t,t+7),S(this,t+1,t+6),S(this,t+2,t+5),S(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0==e?'':0===arguments.length?M(this,0,e):b.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError('Argument must be a Buffer');return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e='',t=a.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString('hex',0,t).match(/.{2}/g).join(' '),this.length>t&&(e+=' ... ')),'<Buffer '+e+'>'},l.prototype.compare=function(e,t,n,r,a){if(!l.isBuffer(e))throw new TypeError('Argument must be a Buffer');if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),0>t||n>e.length||0>r||a>this.length)throw new RangeError('out of range index');if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,a>>>=0,this===e)return 0;for(var s=a-r,d=n-t,u=o(s,d),p=this.slice(r,a),c=e.slice(t,n),f=0;f<u;++f)if(p[f]!==c[f]){s=p[f],d=c[f];break}return s<d?-1:d<s?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return T(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return T(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r='utf8',n=this.length,t=0;else if(void 0===n&&'string'==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t|=0,isFinite(n)?(n|=0,void 0===r&&(r='utf8')):(r=n,n=void 0);else throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');var o=this.length-t;if((void 0===n||n>o)&&(n=o),0<e.length&&(0>n||0>t)||t>this.length)throw new RangeError('Attempt to write outside buffer bounds');r||(r='utf8');for(var a=!1;;)switch(r){case'hex':return A(this,e,t,n);case'utf8':case'utf-8':return R(this,e,t,n);case'ascii':return I(this,e,t,n);case'latin1':case'binary':return x(this,e,t,n);case'base64':return N(this,e,t,n);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return k(this,e,t,n);default:if(a)throw new TypeError('Unknown encoding: '+r);r=(''+r).toLowerCase(),a=!0;}},l.prototype.toJSON=function(){return{type:'Buffer',data:Array.prototype.slice.call(this._arr||this,0)}};var ne=4096;l.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r;if(l.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=l.prototype;else{var o=t-e;r=new l(o,void 0);for(var a=0;a<o;++a)r[a]=this[a+e]}return r},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);for(var r=this[e],o=1,a=0;++a<t&&(o*=256);)r+=this[e+a]*o;return r},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);for(var r=this[e+--t],o=1;0<t&&(o*=256);)r+=this[e+--t]*o;return r},l.prototype.readUInt8=function(e,t){return t||U(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||U(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||U(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||U(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||U(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||U(e,t,this.length);for(var o=this[e],a=1,s=0;++s<t&&(a*=256);)o+=this[e+s]*a;return a*=128,o>=a&&(o-=n(2,8*t)),o},l.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||U(e,t,this.length);for(var o=t,a=1,s=this[e+--o];0<o&&(a*=256);)s+=this[e+--o]*a;return a*=128,s>=a&&(s-=n(2,8*t)),s},l.prototype.readInt8=function(e,t){return t||U(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||U(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||U(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||U(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||U(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||U(e,4,this.length),ee.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||U(e,4,this.length),ee.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||U(e,8,this.length),ee.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||U(e,8,this.length),ee.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,r,o){if(e=+e,t|=0,r|=0,!o){var a=n(2,8*r)-1;B(this,e,t,r,a,0)}var s=1,d=0;for(this[t]=255&e;++d<r&&(s*=256);)this[t+d]=255&e/s;return t+r},l.prototype.writeUIntBE=function(e,t,r,o){if(e=+e,t|=0,r|=0,!o){var a=n(2,8*r)-1;B(this,e,t,r,a,0)}var s=r-1,i=1;for(this[t+s]=255&e;0<=--s&&(i*=256);)this[t+s]=255&e/i;return t+r},l.prototype.writeUInt8=function(e,n,r){return e=+e,n|=0,r||B(this,e,n,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=t(e)),this[n]=255&e,n+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):j(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,r,o){if(e=+e,t|=0,!o){var a=n(2,8*r-1);B(this,e,t,r,a-1,-a)}var s=0,i=1,d=0;for(this[t]=255&e;++s<r&&(i*=256);)0>e&&0==d&&0!==this[t+s-1]&&(d=1),this[t+s]=255&(e/i>>0)-d;return t+r},l.prototype.writeIntBE=function(e,t,r,o){if(e=+e,t|=0,!o){var a=n(2,8*r-1);B(this,e,t,r,a-1,-a)}var s=r-1,i=1,d=0;for(this[t+s]=255&e;0<=--s&&(i*=256);)0>e&&0==d&&0!==this[t+s+1]&&(d=1),this[t+s]=255&(e/i>>0)-d;return t+r},l.prototype.writeInt8=function(e,n,r){return e=+e,n|=0,r||B(this,e,n,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=t(e)),0>e&&(e=255+e+1),this[n]=255&e,n+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):j(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return V(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return V(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return W(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return W(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError('targetStart out of bounds');if(0>n||n>=this.length)throw new RangeError('sourceStart out of bounds');if(0>r)throw new RangeError('sourceEnd out of bounds');r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o=r-n,a;if(this===e&&n<t&&t<r)for(a=o-1;0<=a;--a)e[a+t]=this[a+n];else if(1e3>o||!l.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},l.prototype.fill=function(e,t,n,r){if('string'==typeof e){if('string'==typeof t?(r=t,t=0,n=this.length):'string'==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);256>o&&(e=o)}if(void 0!==r&&'string'!=typeof r)throw new TypeError('encoding must be a string');if('string'==typeof r&&!l.isEncoding(r))throw new TypeError('Unknown encoding: '+r)}else'number'==typeof e&&(e&=255);if(0>t||this.length<t||this.length<n)throw new RangeError('Out of range index');if(n<=t)return this;t>>>=0,n=n===void 0?this.length:n>>>0,e||(e=0);var a;if('number'==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=l.isBuffer(e)?e:z(new l(e,r).toString()),i=s.length;for(a=0;a<n-t;++a)this[a+t]=s[a%i]}return this};var re=/[^+\/0-9A-Za-z-_]/g}).call(a,s(2))},function(e,t,n){'use strict';(function(t){e.exports=t.version&&0!==t.version.indexOf('v0.')&&(0!==t.version.indexOf('v1.')||0===t.version.indexOf('v1.8.'))?t:{nextTick:function(e,n,r,o){if('function'!=typeof e)throw new TypeError('"callback" argument must be a function');var a=arguments.length,s,d;switch(a){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,o)});default:for(s=Array(a-1),d=0;d<s.length;)s[d++]=arguments[d];return t.nextTick(function(){e.apply(null,s)});}}}}).call(t,n(1))},function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return s(e,t,n)}var a=n(16),s=a.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?e.exports=a:(r(a,t),t.Buffer=o),r(s,o),o.from=function(e,t,n){if('number'==typeof e)throw new TypeError('Argument must not be a number');return s(e,t,n)},o.alloc=function(e,t,n){if('number'!=typeof e)throw new TypeError('Argument must be a number');var r=s(e);return void 0===t?r.fill(0):'string'==typeof n?r.fill(t,n):r.fill(t),r},o.allocUnsafe=function(e){if('number'!=typeof e)throw new TypeError('Argument must be a number');return s(e)},o.allocUnsafeSlow=function(e){if('number'!=typeof e)throw new TypeError('Argument must be a number');return a.SlowBuffer(e)}},function(e,t,n){'use strict';function r(e){if(!e)return'utf8';for(var t;;)switch(e){case'utf8':case'utf-8':return'utf8';case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return'utf16le';case'latin1':case'binary':return'latin1';case'base64':case'ascii':case'hex':return e;default:if(t)return;e=(''+e).toLowerCase(),t=!0;}}function o(e){var t=r(e);if('string'!=typeof t&&(h.isEncoding===m||!m(e)))throw new Error('Unknown encoding: '+e);return t||e}function a(e){this.encoding=o(e);var t;switch(this.encoding){case'utf16le':this.text=u,this.end=p,t=4;break;case'utf8':this.fillLast=l,t=4;break;case'base64':this.text=c,this.end=f,t=3;break;default:return this.write=_,void(this.end=g);}this.lastNeed=0,this.lastTotal=0,this.lastChar=h.allocUnsafe(t)}function s(e){if(127>=e)return 0;return 6==e>>5?2:14==e>>4?3:30==e>>3?4:2==e>>6?-1:-2}function d(e,t,n){var r=t.length-1;if(r<n)return 0;var o=s(t[r]);return 0<=o?(0<o&&(e.lastNeed=o-1),o):--r<n||-2===o?0:(o=s(t[r]),0<=o)?(0<o&&(e.lastNeed=o-2),o):--r<n||-2===o?0:(o=s(t[r]),0<=o?(0<o&&(2===o?o=0:e.lastNeed=o-3),o):0)}function i(e,t){if(128!=(192&t[0]))return e.lastNeed=0,'\uFFFD';if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,'\uFFFD';if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,'\uFFFD'}}function l(e){var t=this.lastTotal-this.lastNeed,n=i(this,e,t);return void 0===n?this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length):n}function u(e,t){if(0==(e.length-t)%2){var n=e.toString('utf16le',t);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&56319>=r)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString('utf16le',t,e.length-1)}function p(e){var t=e&&e.length?this.write(e):'';if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString('utf16le',0,n)}return t}function c(e,t){var r=(e.length-t)%3;return 0==r?e.toString('base64',t):(this.lastNeed=3-r,this.lastTotal=3,1==r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString('base64',t,e.length-r))}function f(e){var t=e&&e.length?this.write(e):'';return this.lastNeed?t+this.lastChar.toString('base64',0,3-this.lastNeed):t}function _(e){return e.toString(this.encoding)}function g(e){return e&&e.length?this.write(e):''}var h=n(18).Buffer,m=h.isEncoding||function(e){switch(e=''+e,e&&e.toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':case'raw':return!0;default:return!1;}};t.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return'';var t,n;if(this.lastNeed){if(t=this.fillLast(e),void 0===t)return'';n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||''},a.prototype.end=function(e){var t=e&&e.length?this.write(e):'';return this.lastNeed?t+'\uFFFD':t},a.prototype.text=function(e,t){var n=d(this,e,t);if(!this.lastNeed)return e.toString('utf8',t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString('utf8',t,r)},a.prototype.fillLast=function(e){return this.lastNeed<=e.length?(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length)}},function(e){e.exports=function(e){return null!=e&&'object'==typeof e}},function(e){e.exports=function(e,t){return e===t||e!==e&&t!==t}},function(e,t,n){var r=n(21);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(89);e.exports=function(e,t,n){var o=null==e?void 0:r(e,t);return o===void 0?n:o}},function(e,t,n){'use strict';function r(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,'__esModule',{value:!0});var o=n(97),a=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=(e={})=>{let{scope:t}=e,n=r(e,['scope']);const o=['twitch-js'].concat(t||[]).join('/'),s=a.default.create(n).withScope(o);return s.startTimer=(e)=>{const t=new Date;return e&&e.message&&s.info(e),{done:(e)=>{const n=new Date-t;s.success({message:`${e.message} (${n}ms)`})}}},s}},function(e,t,n){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.isUserAnonymous=t.getEventNameFromMessage=t.isAuthenticationFailedMessage=void 0;var r=n(3),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r);t.isAuthenticationFailedMessage=(e={})=>e.command===o.EVENTS.NOTICE&&''===e.channel&&'Login authentication failed'===e.message,t.getEventNameFromMessage=(e={})=>e.command||e.event||o.EVENTS.ALL,t.isUserAnonymous=(e)=>o.ANONYMOUS_USERNAME_RE.test(e)},function(e){e.exports=function(e){return'object'==typeof e?null!==e:'function'==typeof e}},function(e,t,n){e.exports=!n(55)(function(){return 7!=Object.defineProperty({},'a',{get:function(){return 7}}).a})},function(e,t,n){var r=n(9),o=n(11),a=0/0,s=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if('number'==typeof e)return e;if(o(e))return a;if(r(e)){var t='function'==typeof e.valueOf?e.valueOf():e;e=r(t)?t+'':t}if('string'!=typeof e)return 0===e?e:+e;e=e.replace(s,'');var n=d.test(e);return n||l.test(e)?u(e.slice(2),n?2:8):i.test(e)?a:+e}},function(e,t,n){var r=n(12),o=r.isFinite;e.exports=function(e){return'number'==typeof e&&o(e)}},function(e){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e){e.exports=function(){return!1}},function(e,t,n){t=e.exports=n(67),t.Stream=t,t.Readable=t,t.Writable=n(33),t.Duplex=n(8),t.Transform=n(70),t.PassThrough=n(148)},function(e,n,r){'use strict';(function(n,o,a){function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){N(t,e)}}function i(e){return P.from(e)}function d(e){return P.isBuffer(e)||e instanceof L}function l(){}function u(e,n){M=M||r(8),e=e||{};var o=n instanceof M;this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var a=e.highWaterMark,i=e.writableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:o&&(i||0===i)?i:d,this.highWaterMark=t(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===e.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||'utf8',this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){E(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function p(e){return M=M||r(8),B.call(p,this)||this instanceof M?void(this._writableState=new u(e,this),this.writable=!0,e&&('function'==typeof e.write&&(this._write=e.write),'function'==typeof e.writev&&(this._writev=e.writev),'function'==typeof e.destroy&&(this._destroy=e.destroy),'function'==typeof e.final&&(this._final=e.final)),D.call(this)):new p(e)}function c(e,t){var n=new Error('write after end');e.emit('error',n),k.nextTick(t,n)}function f(e,t,n,r){var o=!0,a=!1;return null===n?a=new TypeError('May not write null values to stream'):'string'!=typeof n&&void 0!==n&&!t.objectMode&&(a=new TypeError('Invalid non-string/buffer chunk')),a&&(e.emit('error',a),k.nextTick(r,a),o=!1),o}function _(e,t,n){return e.objectMode||!1===e.decodeStrings||'string'!=typeof t||(t=P.from(t,n)),t}function g(e,t,n,r,o,a){if(!n){var s=_(t,r,o);r!==s&&(n=!0,o='buffer',r=s)}var i=t.objectMode?1:r.length;t.length+=i;var d=t.length<t.highWaterMark;if(d||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:o,isBuf:n,callback:a,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else h(e,t,!1,i,r,o,a);return d}function h(e,t,n,r,o,a,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(o,t.onwrite):e._write(o,a,t.onwrite),t.sync=!1}function m(e,t,n,r,o){--t.pendingcb,n?(k.nextTick(o,r),k.nextTick(I,e,t),e._writableState.errorEmitted=!0,e.emit('error',r)):(o(r),e._writableState.errorEmitted=!0,e.emit('error',r),I(e,t))}function y(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function E(e,t){var n=e._writableState,r=n.sync,o=n.writecb;if(y(n),t)m(e,n,r,t,o);else{var a=O(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||T(e,n),r?w(b,e,n,a,o):b(e,n,a,o)}}function b(e,t,n,r){n||S(e,t),t.pendingcb--,r(),I(e,t)}function S(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit('drain'))}function T(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=Array(r),a=t.corkedRequestsFree;a.entry=n;for(var i=0,d=!0;n;)o[i]=n,n.isBuf||(d=!1),n=n.next,i+=1;o.allBuffers=d,h(e,t,!0,t.length,o,'',a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,u=n.encoding,p=n.callback,c=t.objectMode?1:l.length;if(h(e,t,!1,c,l,u,p),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function O(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function A(e,t){e._final(function(n){t.pendingcb--,n&&e.emit('error',n),t.prefinished=!0,e.emit('prefinish'),I(e,t)})}function R(e,t){t.prefinished||t.finalCalled||('function'==typeof e._final?(t.pendingcb++,t.finalCalled=!0,k.nextTick(A,e,t)):(t.prefinished=!0,e.emit('prefinish')))}function I(e,t){var n=O(t);return n&&(R(e,t),0===t.pendingcb&&(t.finished=!0,e.emit('finish'))),n}function x(e,t,n){t.ending=!0,I(e,t),n&&(t.finished?k.nextTick(n):e.once('finish',n)),t.ended=!0,e.writable=!1}function N(e,t,n){var r=e.entry;for(e.entry=null;r;){var o=r.callback;t.pendingcb--,o(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var k=r(17);e.exports=p;var w=!n.browser&&-1<['v0.10','v0.9.'].indexOf(n.version.slice(0,5))?o:k.nextTick,M;p.WritableState=u;var v=r(4);v.inherits=r(0);var C={deprecate:r(147)},D=r(68),P=r(18).Buffer,L=a.Uint8Array||function(){},U=r(69);v.inherits(p,D),u.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(u.prototype,'buffer',{get:C.deprecate(function(){return this.getBuffer()},'_writableState.buffer is deprecated. Use _writableState.getBuffer instead.','DEP0003')})}catch(e){}}();var B;'function'==typeof Symbol&&Symbol.hasInstance&&'function'==typeof Function.prototype[Symbol.hasInstance]?(B=Function.prototype[Symbol.hasInstance],Object.defineProperty(p,Symbol.hasInstance,{value:function(e){return!!B.call(this,e)||!(this!==p)&&e&&e._writableState instanceof u}})):B=function(e){return e instanceof this},p.prototype.pipe=function(){this.emit('error',new Error('Cannot pipe, not readable'))},p.prototype.write=function(e,t,n){var r=this._writableState,o=!1,a=!r.objectMode&&d(e);return a&&!P.isBuffer(e)&&(e=i(e)),'function'==typeof t&&(n=t,t=null),a?t='buffer':!t&&(t=r.defaultEncoding),'function'!=typeof n&&(n=l),r.ended?c(this,n):(a||f(this,r,e,n))&&(r.pendingcb++,o=g(this,r,a,e,t,n)),o},p.prototype.cork=function(){var e=this._writableState;e.corked++},p.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&T(this,e))},p.prototype.setDefaultEncoding=function(e){if('string'==typeof e&&(e=e.toLowerCase()),!(-1<['hex','utf8','utf-8','ascii','binary','base64','ucs2','ucs-2','utf16le','utf-16le','raw'].indexOf((e+'').toLowerCase())))throw new TypeError('Unknown encoding: '+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(p.prototype,'writableHighWaterMark',{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),p.prototype._write=function(e,t,n){n(new Error('_write() is not implemented'))},p.prototype._writev=null,p.prototype.end=function(e,t,n){var r=this._writableState;'function'==typeof e?(n=e,e=null,t=null):'function'==typeof t&&(n=t,t=null),null!==e&&e!==void 0&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||x(this,r,n)},Object.defineProperty(p.prototype,'destroyed',{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),p.prototype.destroy=U.destroy,p.prototype._undestroy=U.undestroy,p.prototype._destroy=function(e,t){this.end(),t(e)}}).call(n,r(1),r(48).setImmediate,r(2))},function(e,t,n){var r=n(160),o=n(168),a=o(function(e,t,n){return t=t.toLowerCase(),e+(n?r(t):t)});e.exports=a},function(e,t,n){var r=n(6);e.exports=function(e){return r(e).toLowerCase()}},function(e,t,n){var r=n(183),o=n(184),a=n(185);e.exports=function(e,t){return a(o(e,t,r),e+'')}},function(e){e.exports=function(){return!1}},function(e){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){var r=n(209);e.exports=function(e,t,n){'__proto__'==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){var r=n(5),o=n(90),a=n(91),s=n(6);e.exports=function(e,t){return r(e)?e:o(e,t)?[e]:a(s(e))}},function(e,t,n){var r=n(11);e.exports=function(e){if('string'==typeof e||r(e))return e;var t=e+'';return'0'==t&&1/e==-(1/0)?'-0':t}},function(e){'use strict';function t(){}function n(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function r(e,t,r,o,a){if('function'!=typeof r)throw new TypeError('The listener must be a function');var s=new n(r,o||e,a),i=d?d+t:t;return e._events[i]?e._events[i].fn?e._events[i]=[e._events[i],s]:e._events[i].push(s):(e._events[i]=s,e._eventsCount++),e}function o(e,n){0==--e._eventsCount?e._events=new t:delete e._events[n]}function a(){this._events=new t,this._eventsCount=0}var s=Object.prototype.hasOwnProperty,d='~';Object.create&&(t.prototype=Object.create(null),!new t().__proto__&&(d=!1)),a.prototype.eventNames=function(){var e=[],t,n;if(0===this._eventsCount)return e;for(n in t=this._events)s.call(t,n)&&e.push(d?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},a.prototype.listeners=function(e){var t=d?d+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,a=Array(o);r<o;r++)a[r]=n[r].fn;return a},a.prototype.listenerCount=function(e){var t=d?d+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,r,o,a){var s=d?d+e:e;if(!this._events[s])return!1;var l=this._events[s],u=arguments.length,p,c;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,r),!0;case 5:return l.fn.call(l.context,t,n,r,o),!0;case 6:return l.fn.call(l.context,t,n,r,o,a),!0;}for(c=1,p=Array(u-1);c<u;c++)p[c-1]=arguments[c];l.fn.apply(l.context,p)}else{var i=l.length,f;for(c=0;c<i;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),u){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,r);break;default:if(!p)for(f=1,p=Array(u-1);f<u;f++)p[f-1]=arguments[f];l[c].fn.apply(l[c].context,p);}}return!0},a.prototype.on=function(e,t,n){return r(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return r(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,n,r){var a=d?d+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||r&&!s.once||n&&s.context!==n||o(this,a);else{for(var l=0,i=[],u=s.length;l<u;l++)(s[l].fn!==t||r&&!s[l].once||n&&s[l].context!==n)&&i.push(s[l]);i.length?this._events[a]=1===i.length?i[0]:i:o(this,a)}return this},a.prototype.removeAllListeners=function(e){var n;return e?(n=d?d+e:e,this._events[n]&&o(this,n)):(this._events=new t,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=d,a.EventEmitter=a,e.exports=a},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const n=t.resolveAfter=(e)=>new Promise((t)=>setTimeout(t,e)),r=t.resolveOnEvent=(e,t)=>new Promise((n)=>e.once(t,n)),o=t.resolveInSequence=(e)=>e.reduce((e,t)=>e.then(t),Promise.resolve()),a=t.rejectAfter=(e,t)=>new Promise((n,r)=>setTimeout(r,e,t))},function(e,t,n){'use strict';var r=n(99),o=n(100),a=n(46);e.exports={formats:a,parse:o,stringify:r}},function(e){'use strict';var t=Object.prototype.hasOwnProperty,n=function(){for(var e=[],t=0;256>t;++t)e.push('%'+((16>t?'0':'')+t.toString(16)).toUpperCase());return e}(),r=function(e){for(var t,n;e.length;)if(n=e.pop(),t=n.obj[n.prop],Array.isArray(t)){for(var r=[],o=0;o<t.length;++o)'undefined'!=typeof t[o]&&r.push(t[o]);n.obj[n.prop]=r}return t},o=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)'undefined'!=typeof e[r]&&(n[r]=e[r]);return n};e.exports={arrayToObject:o,assign:function(e,t){return Object.keys(t).reduce(function(e,n){return e[n]=t[n],e},e)},compact:function(e){for(var t=[{obj:{o:e},prop:'o'}],n=[],o=0;o<t.length;++o)for(var a=t[o],s=a.obj[a.prop],i=Object.keys(s),d=0;d<i.length;++d){var l=i[d],u=s[l];'object'==typeof u&&null!==u&&-1===n.indexOf(u)&&(t.push({obj:s,prop:l}),n.push(u))}return r(t)},decode:function(e){try{return decodeURIComponent(e.replace(/\+/g,' '))}catch(t){return e}},encode:function(e){if(0===e.length)return e;for(var t='string'==typeof e?e:e+'',r='',o=0,a;o<t.length;++o){if(a=t.charCodeAt(o),45===a||46===a||95===a||126===a||48<=a&&57>=a||65<=a&&90>=a||97<=a&&122>=a){r+=t.charAt(o);continue}if(128>a){r+=n[a];continue}if(2048>a){r+=n[192|a>>6]+n[128|63&a];continue}if(55296>a||57344<=a){r+=n[224|a>>12]+n[128|63&a>>6]+n[128|63&a];continue}o+=1,a=65536+((1023&a)<<10|1023&t.charCodeAt(o)),r+=n[240|a>>18]+n[128|63&a>>12]+n[128|63&a>>6]+n[128|63&a]}return r},isBuffer:function(e){return null!==e&&'undefined'!=typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return'[object RegExp]'===Object.prototype.toString.call(e)},merge:function e(n,r,a){if(!r)return n;if('object'!=typeof r){if(Array.isArray(n))n.push(r);else if('object'==typeof n)(a.plainObjects||a.allowPrototypes||!t.call(Object.prototype,r))&&(n[r]=!0);else return[n,r];return n}if('object'!=typeof n)return[n].concat(r);var s=n;return Array.isArray(n)&&!Array.isArray(r)&&(s=o(n,a)),Array.isArray(n)&&Array.isArray(r)?(r.forEach(function(r,o){t.call(n,o)?n[o]&&'object'==typeof n[o]?n[o]=e(n[o],r,a):n.push(r):n[o]=r}),n):Object.keys(r).reduce(function(n,o){var s=r[o];return n[o]=t.call(n,o)?e(n[o],s,a):s,n},s)}}},function(e){'use strict';var t=String.prototype.replace,n=/%20/g;e.exports={default:'RFC3986',formatters:{RFC1738:function(e){return t.call(e,n,'+')},RFC3986:function(e){return e}},RFC1738:'RFC1738',RFC3986:'RFC3986'}},function(e,t,n){'use strict';(function(t){var n;'undefined'==typeof WebSocket?'undefined'==typeof MozWebSocket?'undefined'==typeof t?'undefined'==typeof window?'undefined'!=typeof self&&(n=self.WebSocket||self.MozWebSocket):n=window.WebSocket||window.MozWebSocket:n=t.WebSocket||t.MozWebSocket:n=MozWebSocket:n=WebSocket,e.exports=n}).call(t,n(2))},function(e,t,n){(function(e){function r(e,t){this._id=e,this._clearFn=t}var o='undefined'!=typeof e&&e||'undefined'!=typeof self&&self||window,a=Function.prototype.apply;t.setTimeout=function(){return new r(a.call(setTimeout,o,arguments),clearTimeout)},t.setInterval=function(){return new r(a.call(setInterval,o,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(o,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(104),t.setImmediate='undefined'!=typeof self&&self.setImmediate||'undefined'!=typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate='undefined'!=typeof self&&self.clearImmediate||'undefined'!=typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n(2))},function(e){var t='undefined'!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||'undefined'!=typeof msCrypto&&'function'==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var o=Array(16);e.exports=function(){for(var e=0,t;16>e;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=255&t>>>((3&e)<<3);return o}}},function(e){function t(e,t){var r=t||0,o=n;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],'-',o[e[r++]],o[e[r++]],'-',o[e[r++]],o[e[r++]],'-',o[e[r++]],o[e[r++]],'-',o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join('')}for(var n=[],r=0;256>r;++r)n[r]=(r+256).toString(16).substr(1);e.exports=t},function(e,t,n){function r(){this.isAccepted=!1,this.isQueued=!1,this.isStarted=!1,this.isFailed=!1,this.isFinished=!1,this.result=null,this.status='created',this.eta=new s}var o=n(10),a=n(7).EventEmitter,s=n(52);o.inherits(r,a),r.prototype.accept=function(){this.status='accepted',this.isAccepted=!0,this.emit('accepted')},r.prototype.queued=function(){this.status='queued',this.isQueued=!0,this.emit('queued')},r.prototype.unqueued=function(){this.status='accepted',this.isQueued=!1,this.emit('unqueued')},r.prototype.started=function(){this.eta.count=1,this.eta.start(),this.isStarted=!0,this.status='in-progress',this.emit('started')},r.prototype.failed=function(e){this.isFailed=!0,this.isFinished=!0,this.status='failed',this.emit('failed',e)},r.prototype.finish=function(e){this.eta.done=this.eta.count,this.isFinished=!0,this.status='finished',this.result=e,this.emit('finish',this.result)},r.prototype.stopped=function(){this.eta=new s,this.isFinished=!1,this.isStarted=!1,this.status='queued',this.result=null,this.emit('stopped')},r.prototype.progress=function(e){this.eta.done=e.complete,this.eta.count=e.total,this.emit('progress',{complete:this.eta.done,total:this.eta.count,pct:100*(this.eta.done/this.eta.count),eta:this.eta.format('{{etah}}'),message:e.message})},e.exports=r},function(e,n,r){function o(e,t){this.count=e;var n=t&&t.numberFormatter;this.numberFormatter='function'==typeof n?n:i,(t&&t.autoStart||!0===t)&&this.start()}function a(e){return s(1e3*e)}function s(e){function n(e){return 1<e?'s':''}var r=t(e/1e3),o=t(r/31536e3);if(o)return o+' year'+n(o);var a=t((r%=31536e3)/86400);if(a)return a+' day'+n(a);var s=t((r%=86400)/3600);if(s)return s+' hour'+n(s);var i=t((r%=3600)/60);if(i)return i+' minute'+n(i);var d=r%60;return d?d+' second'+n(d):'less than a second'}function i(e){return e.toPrecision(4)}var d=r(10);e.exports=o,o.prototype.start=function(){this.done=0,this.startedAt=new Date},o.prototype.iterate=function(e){this.done++,e&&(this.last=d.format.apply(this,arguments))},o.prototype.format=function(){var e=d.format.apply(this,arguments),t=(new Date-this.startedAt)/1e3,n=this.done/t,r=this.count/n,o=this.done/this.count,s=r-t,i=a(s),l={elapsed:t,rate:n,estimated:r,progress:o,eta:s,etah:i,last:this.last};return e.replace(/{{\S+?}}/g,function(e){var t=e.slice(2,e.length-2),n=l[t]||'';return'number'==typeof n?n.toPrecision(4):n})}},function(e){var t=e.exports={version:'2.5.7'};'number'==typeof __e&&(__e=t)},function(e,t,n){var r=n(116);e.exports=function(e,t,n){return(r(e),void 0===t)?e:1===n?function(n){return e.call(t,n)}:2===n?function(n,r){return e.call(t,n,r)}:3===n?function(n,r,o){return e.call(t,n,r,o)}:function(){return e.apply(t,arguments)}}},function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){var r=n(26),o=n(13).document,a=r(o)&&r(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},function(e,t,n){'use strict';function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,'__esModule',{value:!0}),t.privateMessage=t.userNoticeMessage=t.noticeMessage=t.roomStateMessage=t.userStateMessage=t.globalUserStateMessage=t.clearChatMessage=t.namesEndMessage=t.namesMessage=t.joinOrPartMessage=t.hostTargetMessage=t.modeMessage=void 0;var s=n(58),i=o(s),d=n(28),l=o(d),u=n(29),p=o(u),c=n(129),f=o(c),g=n(132),h=o(g),m=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++)for(var r in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},y=n(136),E=n(71),b=o(E),S=n(3),T=r(S),O=n(25),_=r(O),A=n(72),R=r(A),I=n(176),x=r(I);const N=(e)=>{const{tags:t}=e,n=a(e,['tags']);return m({tags:x.userState(t)},n)};t.modeMessage=(e)=>{const[,t,n,r]=/:[^\s]+ MODE (#[^\s]+) (-|\+)o ([^\s]+)/g.exec(e._raw),o='+'===n;return m({},e,{event:o?T.EVENTS.MOD_GAINED:T.EVENTS.MOD_LOST,channel:t,username:r,message:`${n}o`,isModerator:o})},t.hostTargetMessage=(e)=>{const[,t,n,r]=/:tmi.twitch.tv HOSTTARGET (#[^\s]+) :([^\s]+)?\s?(\d+)?/g.exec(e._raw);return m({},e,{channel:t,username:n,event:(0,i.default)('-'===n?T.NOTICE_MESSAGE_IDS.HOST_OFF:T.NOTICE_MESSAGE_IDS.HOST_ON),numberOfViewers:(0,p.default)((0,l.default)(r))?parseInt(r,10):void 0,message:void 0})},t.joinOrPartMessage=(e)=>{const[,t,,,n,r]=/:(.+)!(.+)@(.+).tmi.twitch.tv (JOIN|PART) (#.+)/g.exec(e._raw);return m({},e,{channel:r,command:n,username:t,message:void 0})},t.namesMessage=(e)=>{const[,,,t,n]=/:(.+).tmi.twitch.tv 353 (.+) = (#.+) :(.+)/g.exec(e._raw),r=n.split(' ');return m({},e,{channel:t,event:T.EVENTS.NAMES,usernames:r,message:void 0})},t.namesEndMessage=(e)=>{const[,t,,n,r]=/:(.+).tmi.twitch.tv 366 (.+) (#.+) :(.+)/g.exec(e._raw);return m({},e,{channel:n,event:T.EVENTS.NAMES_END,username:t,message:r})},t.clearChatMessage=(e)=>{const{tags:t,message:n}=e,r=a(e,['tags','message']);return'undefined'==typeof n?m({},r):m({},r,{tags:m({},t,{banReason:R.generalString(t.banReason),banDuration:R.generalNumber(t.banDuration)}),event:T.EVENTS.USER_BANNED,username:n})},t.globalUserStateMessage=(e)=>{const{tags:t}=e,n=a(e,['tags']);return m({tags:x.globalUserState(t)},n)},t.userStateMessage=N,t.roomStateMessage=(e)=>{const{tags:t}=e,n=a(e,['tags']);return m({tags:x.roomState(t)},n)},t.noticeMessage=(e)=>{const{tags:t}=e,n=a(e,['tags']),r=_.isAuthenticationFailedMessage(e)?m({},t,{msgId:T.EVENTS.AUTHENTICATION_FAILED}):t,o=(0,i.default)(r.msgId);switch(r.msgId){case T.NOTICE_MESSAGE_IDS.ROOM_MODS:return m({event:o,tags:r,mods:R.mods(n.message)},n);default:return m({event:o,tags:r},n);}},t.userNoticeMessage=(e)=>{const t=x.userNotice(e.tags);switch(t.msgId){case T.USER_NOTICE_MESSAGE_IDS.ANON_GIFT_PAID_UPGRADE:case T.USER_NOTICE_MESSAGE_IDS.GIFT_PAID_UPGRADE:case T.USER_NOTICE_MESSAGE_IDS.RAID:case T.USER_NOTICE_MESSAGE_IDS.RESUBSCRIPTION:case T.USER_NOTICE_MESSAGE_IDS.RITUAL:case T.USER_NOTICE_MESSAGE_IDS.SUBSCRIPTION_GIFT_COMMUNITY:case T.USER_NOTICE_MESSAGE_IDS.SUBSCRIPTION_GIFT:case T.USER_NOTICE_MESSAGE_IDS.SUBSCRIPTION:default:return m({},e,{tags:m({},t,{systemMsg:R.generalString(t.systemMsg)}),parameters:x.userNoticeMessageParameters(t),event:x.userNoticeEvent(t),systemMessage:R.generalString(t.systemMsg)});}},t.privateMessage=(e)=>{const{_raw:t,tags:n}=e;if((0,h.default)(e,'tags.bits'))return m({},N(e),x.privateMessageCheerEvent(n));const[r,o,a,s,i]=T.PRIVATE_MESSAGE_HOSTED_RE.exec(t)||[];return r?m({},e,{tags:{displayName:a},channel:`#${o}`,event:s?T.EVENTS.HOSTED_AUTO:i?T.EVENTS.HOSTED_WITH_VIEWERS:T.EVENTS.HOSTED_WITHOUT_VIEWERS,numberOfViewers:R.generalNumber(i)}):N(e)},t.default=(e)=>{const t=e.split(/\r?\n/g),n=[];return t.forEach((e)=>{if(e.length){const{raw:t,tags:r,command:o,prefix:a,params:[s,i]}=(0,y.parse)(e);n.push({_raw:t,timestamp:R.generalTimestamp(parseInt(r['tmi-sent-ts'],10)),username:R.usernameFromPrefix(a),command:o,channel:'*'===s?'':s,tags:(0,f.default)(r)?{}:(0,b.default)(r),message:i})}}),n}},function(e,t,n){var r=n(6);e.exports=function(e){return r(e).toUpperCase()}},function(e,t,n){var r=n(14),o=n(60);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},function(e){e.exports=function(e){return'number'==typeof e&&-1<e&&0==e%1&&e<=9007199254740991}},function(e){e.exports=function(){return!1}},function(e){e.exports=function(){return!1}},function(e){e.exports=function(){return!1}},function(e,t,n){(function(t){function r(e){return this instanceof r?void(i.call(this,e),d.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once('end',o)):new r(e)}function o(){this.allowHalfOpen||this._writableState.ended||t.nextTick(this.end.bind(this))}e.exports=r;var a=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},s=n(4);s.inherits=n(0);var i=n(142),d=n(153);s.inherits(r,i),function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}(a(d.prototype),function(e){r.prototype[e]||(r.prototype[e]=d.prototype[e])})}).call(t,n(1))},function(e){var t={}.toString;e.exports=Array.isArray||function(e){return'[object Array]'==t.call(e)}},function(e,t,n){function r(){o.call(this)}e.exports=r;var o=n(7).EventEmitter,a=n(0);a(r,o),r.Readable=n(32),r.Writable=n(149),r.Duplex=n(150),r.Transform=n(151),r.PassThrough=n(152),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&l.pause&&l.pause()}function r(){l.readable&&l.resume&&l.resume()}function a(){u||(u=!0,e.end())}function s(){u||(u=!0,'function'==typeof e.destroy&&e.destroy())}function i(e){if(d(),0===o.listenerCount(this,'error'))throw e}function d(){l.removeListener('data',n),e.removeListener('drain',r),l.removeListener('end',a),l.removeListener('close',s),l.removeListener('error',i),e.removeListener('error',i),l.removeListener('end',d),l.removeListener('close',d),e.removeListener('close',d)}var l=this;l.on('data',n),e.on('drain',r),e._isStdio||t&&!1===t.end||(l.on('end',a),l.on('close',s));var u=!1;return l.on('error',i),e.on('error',i),l.on('end',d),l.on('close',d),e.on('close',d),e.emit('pipe',l),e}},function(e,n,r){'use strict';(function(n,o){function a(e){return F.from(e)}function s(e){return F.isBuffer(e)||e instanceof j}function i(e,t,n){return'function'==typeof e.prependListener?e.prependListener(t,n):void(e._events&&e._events[t]?D(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n))}function d(e,n){P=P||r(8),e=e||{};var o=n instanceof P;this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var a=e.highWaterMark,s=e.readableHighWaterMark,i=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:o&&(s||0===s)?s:i,this.highWaterMark=t(this.highWaterMark),this.buffer=new G,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||'utf8',this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(!q&&(q=r(19).StringDecoder),this.decoder=new q(e.encoding),this.encoding=e.encoding)}function l(e){return P=P||r(8),this instanceof l?void(this._readableState=new d(e,this),this.readable=!0,e&&('function'==typeof e.read&&(this._read=e.read),'function'==typeof e.destroy&&(this._destroy=e.destroy)),B.call(this)):new l(e)}function u(e,t,n,r,o){var s=e._readableState;if(null===t)s.reading=!1,h(e,s);else{var i;o||(i=c(s,t)),i?e.emit('error',i):s.objectMode||t&&0<t.length?('string'!=typeof t&&!s.objectMode&&Object.getPrototypeOf(t)!==F.prototype&&(t=a(t)),r?s.endEmitted?e.emit('error',new Error('stream.unshift() after end event')):p(e,s,t,!0):s.ended?e.emit('error',new Error('stream.push() after EOF')):(s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?p(e,s,t,!1):E(e,s)):p(e,s,t,!1))):!r&&(s.reading=!1)}return f(s)}function p(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit('data',n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&m(e)),E(e,t)}function c(e,t){var n;return s(t)||'string'==typeof t||void 0===t||e.objectMode||(n=new TypeError('Invalid non-string/buffer chunk')),n}function f(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function _(e){return e>=K?e=K:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function g(e,t){return 0>=e||0===t.length&&t.ended?0:t.objectMode?1:e===e?(e>t.highWaterMark&&(t.highWaterMark=_(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)):t.flowing&&t.length?t.buffer.head.data.length:t.length}function h(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,m(e)}}function m(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(W('emitReadable',t.flowing),t.emittedReadable=!0,t.sync?C.nextTick(y,e):y(e))}function y(e){W('emit readable'),e.emit('readable'),R(e)}function E(e,t){t.readingMore||(t.readingMore=!0,C.nextTick(b,e,t))}function b(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(W('maybeReadMore read 0'),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function S(e){return function(){var t=e._readableState;W('pipeOnDrain',t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&U(e,'data')&&(t.flowing=!0,R(e))}}function T(e){W('readable nexttick read 0'),e.read(0)}function O(e,t){t.resumeScheduled||(t.resumeScheduled=!0,C.nextTick(A,e,t))}function A(e,t){t.reading||(W('resume read 0'),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit('resume'),R(e),t.flowing&&!t.reading&&e.read(0)}function R(e){var t=e._readableState;for(W('flow',t.flowing);t.flowing&&null!==e.read(););}function I(e,t){if(0===t.length)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(''):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=x(e,t.buffer,t.decoder),r}function x(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?r=t.shift():r=n?N(e,t):k(e,t),r}function N(e,t){var n=t.head,r=1,o=n.data;for(e-=o.length;n=n.next;){var a=n.data,s=e>a.length?a.length:e;if(o+=s===a.length?a:a.slice(0,e),e-=s,0===e){s===a.length?(++r,t.head=n.next?n.next:t.tail=null):(t.head=n,n.data=a.slice(s));break}++r}return t.length-=r,o}function k(e,t){var n=F.allocUnsafe(e),r=t.head,o=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var a=r.data,s=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,s),e-=s,0===e){s===a.length?(++o,t.head=r.next?r.next:t.tail=null):(t.head=r,r.data=a.slice(s));break}++o}return t.length-=o,n}function w(e){var t=e._readableState;if(0<t.length)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,C.nextTick(M,t,e))}function M(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit('end'))}function v(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var C=r(17);e.exports=l;var D=r(65),P;l.ReadableState=d;var L=r(7).EventEmitter,U=function(e,t){return e.listeners(t).length},B=r(68),F=r(18).Buffer,j=n.Uint8Array||function(){},H=r(4);H.inherits=r(0);var V=r(144),W=void 0;W=V&&V.debuglog?V.debuglog('stream'):function(){};var G=r(145),Y=r(69),q;H.inherits(l,B);var z=['error','close','destroy','pause','resume'];Object.defineProperty(l.prototype,'destroyed',{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),l.prototype.destroy=Y.destroy,l.prototype._undestroy=Y.undestroy,l.prototype._destroy=function(e,t){this.push(null),t(e)},l.prototype.push=function(e,t){var n=this._readableState,r;return n.objectMode?r=!0:'string'==typeof e&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=F.from(e,t),t=''),r=!0),u(this,e,t,!1,r)},l.prototype.unshift=function(e){return u(this,e,null,!0,!1)},l.prototype.isPaused=function(){return!1===this._readableState.flowing},l.prototype.setEncoding=function(e){return q||(q=r(19).StringDecoder),this._readableState.decoder=new q(e),this._readableState.encoding=e,this};var K=8388608;l.prototype.read=function(e){W('read',e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return W('read: emitReadable',t.length,t.ended),0===t.length&&t.ended?w(this):m(this),null;if(e=g(e,t),0===e&&t.ended)return 0===t.length&&w(this),null;var r=t.needReadable;W('need readable',r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,W('length less than watermark',r)),t.ended||t.reading?(r=!1,W('reading or ended',r)):r&&(W('do read'),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,!t.reading&&(e=g(n,t)));var o;return o=0<e?I(e,t):null,null===o?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(!t.ended&&(t.needReadable=!0),n!==e&&t.ended&&w(this)),null!==o&&this.emit('data',o),o},l.prototype._read=function(){this.emit('error',new Error('_read() is not implemented'))},l.prototype.pipe=function(e,t){function n(e,t){W('onunpipe'),e===c&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,a())}function r(){W('onend'),e.end()}function a(){W('cleanup'),e.removeListener('close',l),e.removeListener('finish',u),e.removeListener('drain',h),e.removeListener('error',d),e.removeListener('unpipe',n),c.removeListener('end',r),c.removeListener('end',p),c.removeListener('data',s),m=!0,f.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&h()}function s(t){W('ondata'),y=!1;var n=e.write(t);!1!==n||y||((1===f.pipesCount&&f.pipes===e||1<f.pipesCount&&-1!==v(f.pipes,e))&&!m&&(W('false write response, pause',c._readableState.awaitDrain),c._readableState.awaitDrain++,y=!0),c.pause())}function d(t){W('onerror',t),p(),e.removeListener('error',d),0===U(e,'error')&&e.emit('error',t)}function l(){e.removeListener('finish',u),p()}function u(){W('onfinish'),e.removeListener('close',l),p()}function p(){W('unpipe'),c.unpipe(e)}var c=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=e;break;case 1:f.pipes=[f.pipes,e];break;default:f.pipes.push(e);}f.pipesCount+=1,W('pipe count=%d opts=%j',f.pipesCount,t);var _=(!t||!1!==t.end)&&e!==o.stdout&&e!==o.stderr,g=_?r:p;f.endEmitted?C.nextTick(g):c.once('end',g),e.on('unpipe',n);var h=S(c);e.on('drain',h);var m=!1,y=!1;return c.on('data',s),i(e,'error',d),e.once('close',l),e.once('finish',u),e.emit('pipe',c),f.flowing||(W('pipe resume'),c.resume()),e},l.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit('unpipe',this,n),this);if(!e){var r=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<o;a++)r[a].emit('unpipe',this,n);return this}var s=v(t.pipes,e);return-1===s?this:(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit('unpipe',this,n),this)},l.prototype.on=function(e,t){var n=B.prototype.on.call(this,e,t);if('data'===e)!1!==this._readableState.flowing&&this.resume();else if('readable'===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&m(this):C.nextTick(T,this))}return n},l.prototype.addListener=l.prototype.on,l.prototype.resume=function(){var e=this._readableState;return e.flowing||(W('resume'),e.flowing=!0,O(this,e)),this},l.prototype.pause=function(){return W('call pause flowing=%j',this._readableState.flowing),!1!==this._readableState.flowing&&(W('pause'),this._readableState.flowing=!1,this.emit('pause')),this},l.prototype.wrap=function(e){var t=this,r=this._readableState,o=!1;for(var a in e.on('end',function(){if(W('wrapped end'),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on('data',function(n){if((W('wrapped data'),r.decoder&&(n=r.decoder.write(n)),!(r.objectMode&&(null===n||void 0===n)))&&(r.objectMode||n&&n.length)){var a=t.push(n);a||(o=!0,e.pause())}}),e)void 0===this[a]&&'function'==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var s=0;s<z.length;s++)e.on(z[s],this.emit.bind(this,z[s]));return this._read=function(t){W('wrapped _read',t),o&&(o=!1,e.resume())},this},Object.defineProperty(l.prototype,'readableHighWaterMark',{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),l._fromList=I}).call(n,r(2),r(1))},function(e,t,n){e.exports=n(7).EventEmitter},function(e,t,n){'use strict';function r(e,t){e.emit('error',t)}var o=n(17);e.exports={destroy:function(e,t){var n=this,a=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return a||s?(t?t(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&o.nextTick(r,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(o.nextTick(r,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){'use strict';function r(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit('error',new Error('write callback called multiple times'));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function o(e){return this instanceof o?void(i.call(this,e),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&('function'==typeof e.transform&&(this._transform=e.transform),'function'==typeof e.flush&&(this._flush=e.flush)),this.on('prefinish',a)):new o(e)}function a(){var e=this;'function'==typeof this._flush?this._flush(function(t,n){s(e,t,n)}):s(this,null,null)}function s(e,t,n){if(t)return e.emit('error',t);if(null!=n&&e.push(n),e._writableState.length)throw new Error('Calling transform done when ws.length != 0');if(e._transformState.transforming)throw new Error('Calling transform done when still transforming');return e.push(null)}e.exports=o;var i=n(8),d=n(4);d.inherits=n(0),d.inherits(o,i),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,i.prototype.push.call(this,e,t)},o.prototype._transform=function(){throw new Error('_transform() is not implemented')},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},o.prototype._read=function(){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(e,t){var n=this;i.prototype._destroy.call(this,e,function(e){t(e),n.emit('close')})}},function(e,t,n){'use strict';const r=n(157),o=n(158),a=n(159),s=(e,t)=>e.some((e)=>'string'==typeof e?e===t:e.test(t)),i=new a({maxSize:1e5}),d=(e,t)=>{t=Object.assign({deep:!1},t);const n=t.exclude;return r(e,(e,t)=>{if(!(n&&s(n,e)))if(i.has(e))e=i.get(e);else{const t=o(e);100>e.length&&i.set(e,t),e=t}return[e,t]},{deep:t.deep})};e.exports=(e,t)=>Array.isArray(e)?Object.keys(e).map((n)=>d(e[n],t)):d(e,t)},function(e,t,n){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0}),t.mods=t.emoteSets=t.emotes=t.badges=t.followersOnly=t.broadcasterLanguage=t.userType=t.usernameFromPrefix=t.generalTimestamp=t.generalBoolean=t.generalNumber=t.generalString=void 0;var o=n(34),a=r(o),s=n(175),i=r(s),d=n(29),l=r(d),u=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++)for(var r in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e};const p=(e)=>'1'===e;t.generalString=(e)=>'string'==typeof e?(0,i.default)(e,/\\[sn]/g,' '):void 0,t.generalNumber=(e)=>{const t=parseInt(e,10);return(0,l.default)(t)?t:void 0},t.generalBoolean=p,t.generalTimestamp=(e)=>{const t=new Date(parseInt(e,10));return'Invalid Date'===t.toString()?new Date:t},t.usernameFromPrefix=(e)=>{if('string'==typeof e){const[,t]=/([^!]+)/.exec(e);return t}},t.userType=(e)=>'string'==typeof e?e:void 0,t.broadcasterLanguage=(e)=>'string'==typeof e?e:void 0,t.followersOnly=(e)=>{const t=parseInt(e,10);if(0===t)return!0;return!!(0<t)&&t},t.badges=(e)=>'string'==typeof e?e.split(',').reduce((e,t)=>{const[n,r]=t.split('/'),o=(0,a.default)(n);return'admin'===o||'broadcaster'===o||'globalMod'===o||'moderator'===o||'partner'===o||'premium'===o||'staff'===o||'subGifter'===o||'turbo'===o||'vip'===o?u({},e,{[o]:p(r)}):'bits'===o||'bitsLeader'===o||'subscriber'===o?u({},e,{[o]:parseInt(r,10)}):u({},e,{[o]:r})},{}):{},t.emotes=(e)=>'string'==typeof e?e.split('/').reduce((e,t)=>{const[n,r]=t.split(':');return[...e,...r.split(',').map((e)=>{const[t,r]=e.split('-');return{id:n,start:parseInt(t,10),end:parseInt(r,10)}})]},[]):[],t.emoteSets=(e)=>'string'==typeof e?e.split(','):void 0,t.mods=(e)=>{const[,t]=e.split(': ');return t.split(', ')}},function(e){var t=/[\u200d\ud800-\udfff\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff\ufe0e\ufe0f]/;e.exports=function(e){return t.test(e)}},function(e,t,n){'use strict';function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0}),t.clientOptions=t.chatOptions=void 0;var a=n(180),s=o(a),i=n(181),d=o(i),l=n(14),u=o(l),p=n(29),c=o(p),f=n(75),_=o(f),g=n(182),h=o(g),m=n(77),y=o(m),E=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++)for(var r in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},b=n(78),S=o(b),T=n(3),O=r(T),A=n(79),R=r(A);t.chatOptions=(e)=>{const t={username:_.default,token:(e)=>(0,s.default)(e)||(0,_.default)(e),isKnown:d.default,isVerified:d.default,connectionTimeout:c.default,joinTimeout:c.default,onAuthenticationFailure:u.default},n=(0,h.default)(E({},e,{username:R.username(e.username),token:R.token(e.token)}),{isKnown:!1,isVerified:!1,connectionTimeout:O.CONNECTION_TIMEOUT,joinTimeout:O.JOIN_TIMEOUT,onAuthenticationFailure:()=>Promise.reject()});return(0,S.default)((0,y.default)(n,t),'[twitch-js/Chat] options: Expected valid options'),n},t.clientOptions=(e)=>{const t={username:_.default,token:_.default,server:_.default,port:c.default,ssl:d.default,isKnown:d.default,isVerified:d.default},n=(0,h.default)(E({},e,{username:R.username(e.username),token:R.token(e.token)}),{server:O.CHAT_SERVER,port:O.CHAT_SERVER_SSL_PORT,ssl:!0,isKnown:!1,isVerified:!1});return(0,S.default)((0,y.default)(n,t),'[twitch-js/Chat/Client] options: Expected valid options'),n}},function(e,t,n){var r=n(15),o=n(5),a=n(20);e.exports=function(e){return'string'==typeof e||!o(e)&&a(e)&&r(e)=='[object String]'}},function(e){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2]);}return e.apply(t,n)}},function(e,t,n){var r=n(186),o=n(187);e.exports=function(e,t){return null==t||r(e,t,o(t))}},function(e,t,n){'use strict';(function(t){e.exports=function(n,r,o,a,s,i,d,e){if('production'!==t.env.NODE_ENV&&void 0===r)throw new Error('invariant requires an error message argument');if(!n){var l;if(void 0===r)l=new Error('Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.');else{var u=[o,a,s,i,d,e],p=0;l=new Error(r.replace(/%s/g,function(){return u[p++]})),l.name='Invariant Violation'}throw l.framesToPop=1,l}}}).call(t,n(1))},function(e,t,n){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0}),t.username=t.token=t.channel=void 0;var o=n(35),a=r(o),s=n(188),i=r(s),d=n(3);t.channel=function(e){return null==e?'#':e.startsWith('#')?e:(0,a.default)(`#${e}`)},t.token=function(e){return null==e?'TWITCHJS':e.startsWith('oauth:')?e:`oauth:${e}`},t.username=function(e){return null==e||'justinfan'===e?`${d.ANONYMOUS_USERNAME}${(0,i.default)(8e4,81e3)}`:e}},function(e,t,n){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.TimeoutError=t.JoinError=t.ParseError=t.AuthenticationError=void 0;var r=n(81),o=function(e){return e&&e.__esModule?e:{default:e}}(r),a=n(3),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a);class i extends o.default{constructor(e,...t){super(`${e} [Chat]`,...t)}}t.AuthenticationError=class extends i{constructor(e,...t){super('Authentication error encountered',...t),Object.assign(this,e)}},t.ParseError=class extends i{constructor(e,t,...n){super('Parse error encountered',...n),this._raw=t,this.command=s.EVENTS.PARSE_ERROR_ENCOUNTERED,this.message=e,this.stack=e.stack}},t.JoinError=class extends i{constructor(e,...t){super('Join error encountered',...t)}},t.TimeoutError=class extends i{constructor(e,...t){super('Timeout error encountered',...t)}},t.default=i},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});class n extends Error{constructor(e,...t){super(e,...t),Error.captureStackTrace&&Error.captureStackTrace(this,n),this.message=`${e} [TwitchJS]`,this.timestamp=new Date}}t.default=n},function(e,t,n){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.AuthenticationError=t.FetchError=void 0;var r=n(81),o=function(e){return e&&e.__esModule?e:{default:e}}(r);class a extends o.default{constructor(e,t,...n){super(`${e.url} ${e.statusText}`,...n),this.ok=!1,this.status=e.status,this.statusText=e.statusText,this.url=e.url,this.body=t}}class s extends a{}t.FetchError=a,t.AuthenticationError=s,t.default=function(e,t){return 401===e.status?new s(e,t):new a(e,t)}},function(e,t,n){function r(e,t,n,p,c){e===t||s(t,function(s,l){if(d(s))c||(c=new o),i(e,t,l,n,r,p,c);else{var f=p?p(u(e,l),s,l+'',e,t,c):void 0;f===void 0&&(f=s),a(e,l,f)}},l)}var o=n(203),a=n(84),s=n(211),i=n(213),d=n(9),l=n(38),u=n(86);e.exports=r},function(e,t,n){function r(e,t,n){(n===void 0||a(e[t],n))&&(n!==void 0||t in e)||o(e,t,n)}var o=n(39),a=n(21);e.exports=r},function(e,t,n){var r=n(30),o=r(Object.getPrototypeOf,Object);e.exports=o},function(e){e.exports=function(e,t){return'__proto__'==t?void 0:e[t]}},function(e,t,n){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0}),t.ChatConstants=t.Chat=void 0;var o=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++)for(var r in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},a=n(88),s=r(a),i=n(192),d=r(i);t.Chat=s.default,t.ChatConstants=a.constants,t.default=class{constructor({token:e,username:t,clientId:n,log:r,onAuthenticationFailure:i,chat:l,api:u}){this.chat=new s.default(o({log:r},l,{token:e,username:t,onAuthenticationFailure:i})),this.chatConstants=a.constants,this.api=new d.default(o({log:r},u,{token:e,clientId:n,onAuthenticationFailure:i}))}updateOptions({chat:e,api:t}){this.chat.updateOptions(e),this.api.updateOptions(t)}}},function(e,t,n){'use strict';function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0}),t.constants=void 0;var a=n(23),s=o(a),i=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++)for(var r in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},d=n(42),l=n(24),u=o(l),p=n(43),c=r(p),f=n(25),_=r(f),g=n(98),h=o(g),m=n(80),y=r(m),E=n(3),b=r(E),S=n(191),T=r(S),O=n(57),A=r(O),R=n(79),I=r(R),x=n(74),N=r(x);class k extends d.EventEmitter{constructor(e){super(),this._readyState=0,this._connectionAttempts=0,this._connectionInProgress=null,this._userState={},this._channelState={},this.connect=()=>this._connectionInProgress?this._connectionInProgress:(this._connectionInProgress=Promise.race([c.rejectAfter(this.options.connectionTimeout,new y.TimeoutError(b.ERROR_CONNECT_TIMED_OUT)),this._handleConnectionAttempt()]).then(this._handleConnectSuccess.bind(this)).catch(this._handleConnectRetry.bind(this)),this._connectionInProgress),this.send=(e,t)=>this._client.send(e,t),this.disconnect=()=>this._client.disconnect(),this.reconnect=(e)=>{e&&(this.options=i({},this.options,e)),this._connectionInProgress=null,this._readyState=2;const t=this._getChannels();return this.disconnect(),this.connect().then(()=>Promise.all(t.map((e)=>this.join(e))))},this.join=(e)=>{const t=I.channel(e);this._log.info(`Joining ${t}`);const n=this._log.startTimer(),r=[this.connect(),c.resolveOnEvent(this,`${b.COMMANDS.ROOM_STATE}/${t}`)];_.isUserAnonymous(this.options.username)||r.push(c.resolveOnEvent(this,`${b.COMMANDS.USER_STATE}/${t}`));const o=Promise.all(r).then(([,e,r])=>{const o={roomState:e.tags,userState:(0,s.default)(r,'tags',null)};return this._setChannelState(e.channel,o),n.done({message:`Joined ${t}`}),o}),a=this.send(`${b.COMMANDS.JOIN} ${t}`);return a.then(()=>Promise.race([c.rejectAfter(this.options.joinTimeout,new y.TimeoutError(b.ERROR_JOIN_TIMED_OUT)),o]))},this.part=(e)=>{const t=I.channel(e);this._log.info(`Parting ${t}`),this._removeChannelState(t),this.send(`${b.COMMANDS.PART} ${t}`)},this.say=(e,t,...n)=>{const r=I.channel(e),o=n.length?['',...n].join(' '):'',a=`PRIVMSG/${r} :${t}${o}`,i=(0,s.default)(this,['_channelState',r,'isModerator']),d=c.rejectAfter(this.options.joinTimeout,b.ERROR_SAY_TIMED_OUT),l=T.resolvers(this)(r,t,...n);return c.resolveInSequence([this._isUserAuthenticated.bind(this),this.send.bind(this,`${b.COMMANDS.PRIVATE_MESSAGE} ${r} :${t}${o}`,{isModerator:i}),()=>Promise.race([d,...l])]).then((e)=>(this._log.info(a),e)).catch((e)=>(this._log.error(a,e),Promise.reject(e)))},this.whisper=(e,t)=>c.resolveInSequence([this._isUserAuthenticated.bind(this),this.send.bind(this,`${b.COMMANDS.WHISPER} :/w ${e} ${t}`)]),this.broadcast=(e)=>c.resolveInSequence([this._isUserAuthenticated.bind(this),()=>Promise.all(this._getChannels().map((t)=>this.say(t,e)))]),this.options=e,this._log=(0,u.default)(i({scope:'Chat'},this.options.log)),Object.assign(this,T.factory(this))}get options(){return this._options}set options(e){this._options=N.chatOptions(e)}updateOptions(e){const{token:t,username:n}=this.options;this.options=i({},e,{token:t,username:n})}_handleConnectionAttempt(){return new Promise((t,e)=>{const n=this._log.startTimer({message:'Connecting ...'});this._readyState=1,this._connectionAttempts+=1,this._client&&this._client.removeAllListeners(),this._client=new h.default(this.options),this._client.on(b.EVENTS.ALL,this._handleMessage,this),this._client.on(b.EVENTS.DISCONNECTED,this._handleDisconnect,this),this._client.once(b.EVENTS.RECONNECT,()=>this.reconnect()),this._client.once(b.EVENTS.AUTHENTICATION_FAILED,e),this._client.once(b.EVENTS.CONNECTED,(r)=>{n.done({message:'Connected'}),t(r)})})}_handleConnectSuccess(e){return this._readyState=3,this._connectionAttempts=0,this._handleMessage(e),e}_handleConnectRetry(e){return this._connectionInProgress=null,this._readyState=2,this._log.info('Retrying ...'),e.event===b.EVENTS.AUTHENTICATION_FAILED?this.options.onAuthenticationFailure().then((e)=>this.options=i({},this.options,{token:e})).then(()=>c.resolveAfter(this.options.connectionTimeout)).then(()=>this.connect()).catch(()=>{throw this._log.error('Connection failed'),new y.AuthenticationError(e)}):this.connect()}_isUserAuthenticated(){return new Promise((e,t)=>{_.isUserAnonymous(this.options.username)?t(new Error('Not authenticated')):e()})}_emit(e,t){if(e){const n=(0,s.default)(t,'tags.displayName')||t.username||'',r=(0,s.default)(t,'message')||'';this._log.info(`${e}`,`${n}${r?':':''}`,r),e.split('/').filter((e)=>'#'!==e).reduce((e,n)=>{const r=[...e,n];return super.emit(r.join('/'),t),r},[])}super.emit(b.EVENTS.ALL,t)}_getChannels(){return Object.keys(this._channelState)}_getChannelState(e){return this._channelState[e]}_setChannelState(e,t){this._channelState[e]=t}_removeChannelState(e){this._channelState=Object.entries(this._channelState).reduce((t,[n,r])=>n===e?t:i({},t,{[n]:r}),{})}_clearChannelState(){this._channelState={}}_handleMessage(e){const t=I.channel(e.channel),n=(0,s.default)(this,'_userState.username',''),r=(0,s.default)(e,'username'),o=i({},e,{isSelf:n===r});let a=o.command,d=o;switch(o.command){case b.EVENTS.JOIN:{d=A.joinOrPartMessage(o),d.isSelf=!0,a=`${d.command}/${t}`;break}case b.EVENTS.PART:{d=A.joinOrPartMessage(o),d.isSelf=!0,a=`${d.command}/${t}`;break}case b.EVENTS.NAMES:{d=A.namesMessage(o),d.isSelf=!0,a=`${d.command}/${t}`;break}case b.EVENTS.NAMES_END:{d=A.namesEndMessage(o),d.isSelf=!0,a=`${d.command}/${t}`;break}case b.EVENTS.CLEAR_CHAT:{d=A.clearChatMessage(o),a=d.event?`${d.command}/${d.event}/${t}`:`${d.command}/${t}`;break}case b.EVENTS.HOST_TARGET:{d=A.hostTargetMessage(o),a=`${d.command}/${t}`;break}case b.EVENTS.MODE:{if(d=A.modeMessage(o),a=`${d.command}/${t}`,n===d.username){const e=this._getChannelState(t);this._setChannelState(t,i({},e,{userState:i({},e.userState,{isModerator:d.isModerator})}))}break}case b.EVENTS.GLOBAL_USER_STATE:{d=A.globalUserStateMessage(o),this._userState=d.tags;break}case b.EVENTS.USER_STATE:{d=A.userStateMessage(o),a=`${d.command}/${t}`,this._setChannelState(t,i({},this._getChannelState(t),{userState:d.tags}));break}case b.EVENTS.ROOM_STATE:{d=A.roomStateMessage(o),a=`${d.command}/${t}`,this._setChannelState(t,i({},this._getChannelState(t),{roomState:d.roomState}));break}case b.EVENTS.NOTICE:{d=A.noticeMessage(o),a=`${d.command}/${d.event}/${t}`;break}case b.EVENTS.USER_NOTICE:{d=A.userNoticeMessage(o),a=`${d.command}/${d.event}/${t}`;break}case b.EVENTS.PRIVATE_MESSAGE:{d=A.privateMessage(o),a=d.event?`${d.command}/${d.event}/${t}`:`${d.command}/${t}`;break}default:{const e=_.getEventNameFromMessage(o);a='#'===t?e:`${e}/${t}`}}this._emit(a,d)}_handleDisconnect(){this._connectionInProgress=null,this._readyState=5}}t.constants=b,t.default=k},function(e,t,n){var r=n(40),o=n(41);e.exports=function(e,t){t=r(t,e);for(var n=0,a=t.length;null!=e&&n<a;)e=e[o(t[n++])];return n&&n==a?e:void 0}},function(e,t,n){function r(e,t){if(o(e))return!1;var n=typeof e;return!!('number'==n||'symbol'==n||'boolean'==n||null==e||a(e))||i.test(e)||!s.test(e)||null!=t&&e in Object(t)}var o=n(5),a=n(11),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=r},function(e,t,n){var r=n(92),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,s=r(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(''),e.replace(o,function(e,n,r,o){t.push(r?o.replace(a,'$1'):n||e)}),t});e.exports=s},function(e){e.exports=function(e){return e}},function(e,t,n){function r(e){if('string'==typeof e)return e;if(s(e))return a(e,r)+'';if(i(e))return u?u.call(e):'';var t=e+'';return'0'==t&&1/e==-d?'-0':t}var o=n(94),a=n(96),s=n(5),i=n(11),d=1/0,l=o?o.prototype:void 0,u=l?l.toString:void 0;e.exports=r},function(e,t,n){var r=n(12),o=r.Symbol;e.exports=o},function(e,t,n){(function(t){var n='object'==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(2))},function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}},function(t){(function(e,n){t.exports=n()})(this,function(){'use strict';function t(e){return'[object Object]'===Object.prototype.toString.call(e)}function n(e){return!!t(e)&&!!(e.message||e.args)&&!e.stack}var r={fatal:{level:0},error:{level:0},warn:{level:1},log:{level:2},info:{level:3},success:{level:3},debug:{level:4},trace:{level:5},silent:{level:Infinity},ready:{level:3},start:{level:3}};let a=!1;const s=[];class i{constructor(e={}){for(const t in this._reporters=e.reporters||[],this._types=e.types||r,this._level=null==e.level?3:e.level,this._defaults=e.defaults||{},this._async='undefined'==typeof e.async?null:e.async,this._stdout=e.stdout,this._stderr=e.stdout,this._mockFn=e.mockFn,this._types)this[t]=this._wrapLogFn(Object.assign({type:t},this._types[t],this._defaults));this._mockFn&&this.mockTypes()}get level(){return this._level}set level(t){let n=0,r=0;for(const e in this._types){const t=this._types[e];t.level>r?r=t.level:t.level<n&&(n=t.level)}this._level=o(r,e(n,t))}get stdout(){return this._stdout||console._stdout}get stderr(){return this._stderr||console._stderr}create(e){return new i(Object.assign({reporters:this._reporters,level:this._level,types:this._types,defaults:this._defaults,stdout:this._stdout,stderr:this._stderr,mockFn:this._mockFn},e))}addReporter(e){return this._reporters.push(e),this}removeReporter(e){if(e){const t=this._reporters.indexOf(e);if(0<=t)return this._reporters.splice(t,1)}else this._reporters.splice(0);return this}setReporters(e){this._reporters=Array.isArray(e)?e:[e]}withDefaults(e){return this.create({defaults:Object.assign({},this._defaults,e)})}withTag(e){return this.withDefaults({tag:this._defaults.tag?this._defaults.tag+':'+e:e})}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(const e in this._types)console['__'+e]||(console['__'+e]=console[e]),console[e]=this[e]}restoreConsole(){for(const e in this._types)console['__'+e]&&(console[e]=console['__'+e],delete console['__'+e])}wrapStd(){this._wrapStream(this.stdout,'log'),this._wrapStream(this.stderr,'log')}_wrapStream(e,t){e&&(!e.__write&&(e.__write=e.write),e.write=(e)=>{this[t]((e+'').trim())})}restoreStd(){this._restoreStream(this.stdout),this._restoreStream(this.stderr)}_restoreStream(e){!e||e.__write&&(e.write=e.__write,delete e.__write)}pauseLogs(){a=!0}resumeLogs(){a=!1;const e=s.splice(0);for(const t of e)t[0]._logFn(t[1],t[2])}mockTypes(e){if(this._mockFn=e||this._mockFn,'function'==typeof this._mockFn)for(const e in this._types)this[e]=this._mockFn(e,this._types[e])||this[e]}_wrapLogFn(e){function t(){return a?void s.push([this,e,arguments]):this._logFn(e,arguments)}return t.bind(this)}_logFn(e,t){if(e.level>this._level)return!!this._async&&Promise.resolve(!1);const r=Object.assign({date:new Date,args:[]},e);return 1===t.length&&n(t[0])?Object.assign(r,t[0]):r.args=Array.from(t),r.message&&(r.args.unshift(r.message),delete r.message),r.additional&&(!Array.isArray(r.additional)&&(r.additional=r.additional.split('\n')),r.args.push('\n'+r.additional.join('\n')),delete r.additional),this._async?this._logAsync(r):void this._log(r)}_log(e){for(const t of this._reporters)t.log(e,{async:!1,stdout:this.stdout,stderr:this.stderr})}_logAsync(e){return Promise.all(this._reporters.map((t)=>t.log(e,{async:!0,stdout:this.stdout,stderr:this.stderr})))}}i.prototype.add=i.prototype.addReporter,i.prototype.remove=i.prototype.removeReporter,i.prototype.clear=i.prototype.removeReporter,i.prototype.withScope=i.prototype.withTag,i.prototype.mock=i.prototype.mockTypes,i.prototype.pause=i.prototype.pauseLogs,i.prototype.resume=i.prototype.resumeLogs;const d={info:'cyan'},l={0:'red',1:'yellow',2:'white',3:'green'};window.consola||(window.consola=new i({reporters:[new class{constructor(e){this.options=Object.assign({},e)}log(e){const t=1>e.level?console.__error||console.error:console.__log||console.log,n='log'===e.type?'':`[${e.type.toUpperCase()}]`,r=e.tag?`[${e.tag.toUpperCase()}]`:'',o=`[${new Date(e.date).toLocaleTimeString()}]`,a=d[e.type]||l[e.level],s=`color: ${a}; background-color: inherit;`,i=`color: ${e.additionalColor||'grey'}; background-color: inherit;`;t('%c'+o+r+'%c'+n,i,s,...e.args)}}]}));var u=window.consola;return u})},function(e,t,n){'use strict';function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var a=n(23),s=o(a),i=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++)for(var r in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},d=n(42),l=n(44),u=n(101),p=o(u),c=n(102),f=o(c),_=n(24),g=o(_),h=n(3),m=r(h),y=n(57),E=o(y),b=n(74),S=r(b),T=n(25),O=r(T),A=n(80),R=r(A);const I=m.CLIENT_PRIORITY;class x extends d.EventEmitter{constructor(e={}){super(),this._pingTimeoutId=-1,this._reconnectTimeoutId=-1,this.isReady=()=>1===(0,s.default)(this,'_ws.readyState'),this.send=(e,{priority:n=1,isModerator:t}={})=>{const r=this._ws.send.bind(this._ws,e),o=t?this._moderatorQueue:this._queue,a=o.push({fn:r,priority:n});return new Promise((t,n)=>a.on('accepted',()=>{t(),this._log.debug('<',e)}).on('failed',()=>{n(),this._log.error('<',e)}))},this.disconnect=()=>{this._handleKeepAliveReset(),this._ws.close()},this._options=S.clientOptions(e);const{ssl:t,server:n,port:r,log:o}=this._options;this._log=(0,g.default)(i({scope:'Chat/Client'},o));const a=t?'wss':'ws';this._ws=new p.default(`${a}://${n}:${r}`),this._ws.onopen=this._handleOpen.bind(this),this._ws.onmessage=this._handleMessage.bind(this),this._ws.onerror=this._handleError.bind(this),this._ws.onclose=this._handleClose.bind(this),this._queue=this._createQueue(this._options),this._moderatorQueue=this._options.isVerified?this._queue:this._createQueue({isModerator:!0})}_createQueue({isModerator:e,isVerified:t,isKnown:n}){if(e)return new f.default({maxLength:m.RATE_LIMIT_MODERATOR});return t?new f.default({maxLength:m.RATE_LIMIT_VERIFIED_BOT}):n?new f.default({maxLength:m.RATE_LIMIT_KNOWN_BOT}):new f.default}_isUserAnonymous(){return O.isUserAnonymous((0,s.default)(this,'_options.username'))}_handleOpen(){this.send(`CAP REQ :${m.CAPABILITIES.join(' ')}`,{priority:I});const{token:e,username:t}=this._options;this.send(`PASS ${e}`,{priority:I}),this.send(`NICK ${t}`,{priority:I})}_handleMessage(e){const t=e.data;try{this._handleKeepAlive();const e=(0,E.default)(t);e.forEach((e)=>{const t=e.command||'';this._log.debug('> %s %s',t,JSON.stringify(i({},e,{_raw:void 0}))),O.isAuthenticationFailedMessage(e)?(this.emit(m.EVENTS.AUTHENTICATION_FAILED,i({},e,{event:m.EVENTS.AUTHENTICATION_FAILED})),this.disconnect()):(e.command===m.COMMANDS.PING&&this.send('PONG :tmi.twitch.tv',{priority:I}),this._isUserAnonymous()?e.command===m.COMMANDS.WELCOME&&this.emit(m.EVENTS.CONNECTED,{command:m.EVENTS.CONNECTED}):e.command===m.COMMANDS.GLOBAL_USER_STATE&&this.emit(m.EVENTS.CONNECTED,i({},e,{command:m.EVENTS.CONNECTED})),e.command===m.COMMANDS.RECONNECT&&this.emit(m.EVENTS.RECONNECT,i({},e,{command:m.EVENTS.RECONNECT}))),this.emit(m.EVENTS.ALL,e)})}catch(e){const n=(0,l.stringify)({title:'Parsing error encountered',body:t});this._log.error('Parsing error encountered. Please create an issue: %s',`https://github.com/twitch-devs/twitch-js/issues/new?${n}`,e);const r=new R.ParseError(e,t);throw this.emit(r.command,r),this.emit(m.EVENTS.ALL,r),r}finally{const e={_raw:t,timestamp:new Date};this.emit(m.EVENTS.RAW,e)}}_handleError(e){const t={timestamp:new Date,event:m.EVENTS.ERROR_ENCOUNTERED,messageEvent:e};this.emit(m.EVENTS.ERROR_ENCOUNTERED,t),this.emit(m.EVENTS.ALL,t)}_handleClose(e){const t={timestamp:new Date,event:m.EVENTS.DISCONNECTED,messageEvent:e};this.emit(m.EVENTS.DISCONNECTED,t),this.emit(m.EVENTS.ALL,t)}_handleKeepAlive(){this._handleKeepAliveReset(),this.isReady()&&(this._pingTimeoutId=setTimeout(()=>this.send(m.COMMANDS.PING,{priority:I}),m.KEEP_ALIVE_PING_TIMEOUT)),this._reconnectTimeoutId=setTimeout(()=>this.emit(m.EVENTS.RECONNECT,{}),m.KEEP_ALIVE_RECONNECT_TIMEOUT)}_handleKeepAliveReset(){clearTimeout(this._pingTimeoutId),clearTimeout(this._reconnectTimeoutId),this._pingTimeoutId=-1,this._reconnectTimeoutId=-1}}t.default=x},function(e,t,n){'use strict';var r=n(45),o=n(46),a={brackets:function(e){return e+'[]'},indices:function(e,t){return e+'['+t+']'},repeat:function(e){return e}},s=Date.prototype.toISOString,d={delimiter:'&',encode:!0,encoder:r.encode,encodeValuesOnly:!1,serializeDate:function(e){return s.call(e)},skipNulls:!1,strictNullHandling:!1},l=function e(t,n,o,a,s,l,u,p,c,f,_,g){var h=t;if('function'==typeof u)h=u(n,h);else if(h instanceof Date)h=f(h);else if(null===h){if(a)return l&&!g?l(n,d.encoder):n;h=''}if('string'==typeof h||'number'==typeof h||'boolean'==typeof h||r.isBuffer(h)){if(l){var m=g?n:l(n,d.encoder);return[_(m)+'='+_(l(h,d.encoder))]}return[_(n)+'='+_(h+'')]}var y=[];if('undefined'==typeof h)return y;var E;if(Array.isArray(u))E=u;else{var b=Object.keys(h);E=p?b.sort(p):b}for(var S=0,i;S<E.length;++S)(i=E[S],!(s&&null===h[i]))&&(y=Array.isArray(h)?y.concat(e(h[i],o(n,i),o,a,s,l,u,p,c,f,_,g)):y.concat(e(h[i],n+(c?'.'+i:'['+i+']'),o,a,s,l,u,p,c,f,_,g)));return y};e.exports=function(e,t){var n=e,s=t?r.assign({},t):{};if(null!==s.encoder&&s.encoder!==void 0&&'function'!=typeof s.encoder)throw new TypeError('Encoder has to be a function.');var u='undefined'==typeof s.delimiter?d.delimiter:s.delimiter,p='boolean'==typeof s.strictNullHandling?s.strictNullHandling:d.strictNullHandling,c='boolean'==typeof s.skipNulls?s.skipNulls:d.skipNulls,f='boolean'==typeof s.encode?s.encode:d.encode,_='function'==typeof s.encoder?s.encoder:d.encoder,g='function'==typeof s.sort?s.sort:null,h='undefined'!=typeof s.allowDots&&s.allowDots,m='function'==typeof s.serializeDate?s.serializeDate:d.serializeDate,y='boolean'==typeof s.encodeValuesOnly?s.encodeValuesOnly:d.encodeValuesOnly;if('undefined'==typeof s.format)s.format=o['default'];else if(!Object.prototype.hasOwnProperty.call(o.formatters,s.format))throw new TypeError('Unknown format option provided.');var E=o.formatters[s.format],b,S;'function'==typeof s.filter?(S=s.filter,n=S('',n)):Array.isArray(s.filter)&&(S=s.filter,b=S);var T=[];if('object'!=typeof n||null===n)return'';var O=s.arrayFormat in a?s.arrayFormat:'indices'in s?s.indices?'indices':'repeat':'indices';var A=a[O];b||(b=Object.keys(n)),g&&b.sort(g);for(var R=0,i;R<b.length;++R)(i=b[R],!(c&&null===n[i]))&&(T=T.concat(l(n[i],i,A,p,c,f?_:null,S,g,h,m,E,y)));var I=T.join(u),x=!0===s.addQueryPrefix?'?':'';return 0<I.length?x+I:''}},function(e,t,n){'use strict';var r=n(45),o=Object.prototype.hasOwnProperty,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:r.decode,delimiter:'&',depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},s=function(e,t){for(var n={},r=t.ignoreQueryPrefix?e.replace(/^\?/,''):e,s=t.parameterLimit===Infinity?void 0:t.parameterLimit,d=r.split(t.delimiter,s),l=0;l<d.length;++l){var i=d[l],u=i.indexOf(']='),p=-1===u?i.indexOf('='):u+1,c,f;-1===p?(c=t.decoder(i,a.decoder),f=t.strictNullHandling?null:''):(c=t.decoder(i.slice(0,p),a.decoder),f=t.decoder(i.slice(p+1),a.decoder)),n[c]=o.call(n,c)?[].concat(n[c]).concat(f):f}return n},d=function(e,t,n){for(var r=t,o=e.length-1;0<=o;--o){var a=e[o],s;if('[]'===a)s=[],s=s.concat(r);else{s=n.plainObjects?Object.create(null):{};var i='['===a.charAt(0)&&']'===a.charAt(a.length-1)?a.slice(1,-1):a,d=parseInt(i,10);!isNaN(d)&&a!==i&&d+''===i&&0<=d&&n.parseArrays&&d<=n.arrayLimit?(s=[],s[d]=r):s[i]=r}r=s}return r},l=function(e,t,n){if(e){var r=n.allowDots?e.replace(/\.([^.[]+)/g,'[$1]'):e,a=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,l=a.exec(r),u=l?r.slice(0,l.index):r,p=[];if(u){if(!n.plainObjects&&o.call(Object.prototype,u)&&!n.allowPrototypes)return;p.push(u)}for(var c=0;null!==(l=s.exec(r))&&c<n.depth;){if(c+=1,!n.plainObjects&&o.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;p.push(l[1])}return l&&p.push('['+r.slice(l.index)+']'),d(p,t,n)}};e.exports=function(e,t){var n=t?r.assign({},t):{};if(null!==n.decoder&&void 0!==n.decoder&&'function'!=typeof n.decoder)throw new TypeError('Decoder has to be a function.');if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter='string'==typeof n.delimiter||r.isRegExp(n.delimiter)?n.delimiter:a.delimiter,n.depth='number'==typeof n.depth?n.depth:a.depth,n.arrayLimit='number'==typeof n.arrayLimit?n.arrayLimit:a.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder='function'==typeof n.decoder?n.decoder:a.decoder,n.allowDots='boolean'==typeof n.allowDots?n.allowDots:a.allowDots,n.plainObjects='boolean'==typeof n.plainObjects?n.plainObjects:a.plainObjects,n.allowPrototypes='boolean'==typeof n.allowPrototypes?n.allowPrototypes:a.allowPrototypes,n.parameterLimit='number'==typeof n.parameterLimit?n.parameterLimit:a.parameterLimit,n.strictNullHandling='boolean'==typeof n.strictNullHandling?n.strictNullHandling:a.strictNullHandling,''===e||null===e||'undefined'==typeof e)return n.plainObjects?Object.create(null):{};for(var o='string'==typeof e?s(e,n):e,d=n.plainObjects?Object.create(null):{},u=Object.keys(o),p=0;p<u.length;++p){var i=u[p],c=l(i,o[i],n);d=r.merge(d,c,n)}return r.compact(d)}},function(e,t,n){'use strict';var r;try{r=n(47)}catch(t){r=n(47)}e.exports=r},function(t,n,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,'__esModule',{value:!0});var a=r(103),s=o(a),i=r(112),d=o(i),l=r(113),u=o(l),p=r(128),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(p);n.default=class{constructor(t={}){this._length=0,this._timestamp=new Date,this._callbacks={},this.push=({fn:e,priority:t})=>this._q.push({fn:e,priority:t}).on('accepted',this._handleTaskQueued).on('finish',this._handleTaskFinished),this._handlePriority=({priority:e=1},t)=>t(null,e),this._handlePrecondition=(t)=>{const n=new Date;n-this._timestamp>this._tickInterval&&(this._timestamp=n,this._length=e(0,this._length-this._maxLength)),t(null,this._length<this._maxLength)},this._handleTaskQueued=(e,t)=>{this._callbacks.onTaskQueued(e,t)},this._handleTaskFinished=(e,t)=>{const n=new Date;n-this._timestamp>this._tickInterval&&(this._timestamp=new Date),++this._length,this._callbacks.onTaskFinished(e,t)},this._handleQueueDrained=()=>{this._callbacks.onQueueDrained()};const{maxLength:n=20,tickInterval:r=3e4,onTaskQueued:o=()=>{},onTaskFinished:a=()=>{},onQueueDrained:i=()=>{}}=t;this._maxLength=n,this._tickInterval=r,this._callbacks={onTaskQueued:o,onTaskFinished:a,onQueueDrained:i},this._q=new s.default(({fn:e},t)=>{e(),t()},{store:new d.default,setImmediate:u.default,priority:this._handlePriority,precondition:this._handlePrecondition,preconditionRetryTimeout:c.QUEUE_TICK_RATE}),this._q.on('drain',this._handleQueueDrained)}}},function(e,t,n){(function(t){function r(e,n){var r=this;if(n=n||{},'object'==typeof e&&(n=e||{}),'function'==typeof e&&(n.process=e),!n.process)throw new Error('Queue has no process function.');if(n=n||{},r.process=n.process||function(e,t){t(null,{})},r.filter=n.filter||function(e,t){t(null,e)},r.merge=n.merge||function(e,t,n){n(null,t)},r.precondition=n.precondition||function(e){e(null,!0)},r.setImmediate=n.setImmediate||t,r.id=n.id||'id',r.priority=n.priority||null,r.cancelIfRunning=void 0!==n.cancelIfRunning&&!!n.cancelIfRunning,r.autoResume=void 0===n.autoResume||!!n.autoResume,r.failTaskOnProcessException=void 0===n.failTaskOnProcessException||!!n.failTaskOnProcessException,r.filo=n.filo||!1,r.batchSize=n.batchSize||1,r.batchDelay=n.batchDelay||0,r.batchDelayTimeout=n.batchDelayTimeout||Infinity,r.afterProcessDelay=n.afterProcessDelay||0,r.concurrent=n.concurrent||1,r.maxTimeout=n.maxTimeout||Infinity,r.maxRetries=n.maxRetries||0,r.retryDelay=n.retryDelay||0,r.storeMaxRetries=n.storeMaxRetries||Infinity,r.storeRetryTimeout=n.storeRetryTimeout||1e3,r.preconditionRetryTimeout=n.preconditionRetryTimeout||1e3,r._queuedPeak=0,r._queuedTime={},r._processedTotalElapsed=0,r._processedAverage=0,r._processedTotal=0,r._failedTotal=0,r.length=0,r._stopped=!1,r._saturated=!1,r._preconditionRetryTimeoutId=null,r._batchTimeoutId=null,r._batchDelayTimeoutId=null,r._connected=!1,r._storeRetries=0,r._hasMore=!1,r._isWriting=!1,r._writeQueue=[],r._writing={},r._tasksWaitingForConnect=[],r._calledDrain=!0,r._calledEmpty=!0,r._fetching=0,r._running=0,r._retries={},r._workers={},r._tickets={},r.use(n.store||'memory'),!r._store)throw new Error('Queue cannot continue without a valid store.')}var o=n(105),a=n(10),s=n(7).EventEmitter,i=n(51),d=n(109),l=n(110);a.inherits(r,s),r.prototype.destroy=function(e){e=e||function(){};var t=this;t._hasMore=!1,t._isWriting=!1,t._writeQueue=[],t._writing={},t._tasksWaitingForConnect=[],t._tickets={},t._workers={},t._fetching=0,t._running={},t._retries={},t._calledEmpty=!0,t._calledDrain=!0,t._connected=!1,t.pause(),'function'==typeof t._store.close?t._store.close(e):e()},r.prototype.resetStats=function(){this._queuedPeak=0,this._processedTotalElapsed=0,this._processedAverage=0,this._processedTotal=0,this._failedTotal=0},r.prototype.getStats=function(){var e=0===this._processedTotal?0:1-this._failedTotal/this._processedTotal;return{successRate:e,peak:this._queuedPeak,average:this._processedAverage,total:this._processedTotal}},r.prototype.use=function(e,t){var n=this,r=function(e){var t;try{t=!function(){var t=new Error('Cannot find module "."');throw t.code='MODULE_NOT_FOUND',t}()}catch(t){throw new Error('Attempting to require better-queue-'+e+', but failed.\nPlease ensure you have this store installed via npm install --save better-queue-'+e)}return t};if('string'==typeof e){var o=r(e);n._store=new o(t)}else if('object'==typeof e&&'string'==typeof e.type){var o=r(e.type);n._store=new o(e)}else if('object'==typeof e&&e.putTask&&e.getTask&&(n.filo&&e.takeLastN||!n.filo&&e.takeFirstN))n._store=e;else throw new Error('unknown_store');n._connected=!1,n._tasksWaitingForConnect=[],n._connectToStore()},r.prototype._connectToStore=function(){var e=this;return e._connected?void 0:e._storeRetries>=e.storeMaxRetries?e.emit('error',new Error('failed_connect_to_store')):void(e._storeRetries++,e._store.connect(function(t,n){if(t)return setTimeout(function(){e._connectToStore()},e.storeRetryTimeout);if(void 0===n||null===n)throw new Error('store_not_returning_length');if(e.length=parseInt(n),isNaN(e.length))throw new Error('length_is_not_a_number');e.length&&(e._calledDrain=!1),e._connected=!0,e._storeRetries=0,e._store.getRunningTasks(function(t,n){!e._stopped&&e.autoResume&&(Object.keys(n).forEach(function(t){e._running++,e._startBatch(n[t],{},t)}),e.resume());for(var r=0;r<e._tasksWaitingForConnect.length;r++)e.push(e._tasksWaitingForConnect[r].input,e._tasksWaitingForConnect[r].ticket)})}))},r.prototype.resume=function(){var e=this;e._stopped=!1,e._getWorkers().forEach(function(e){'function'==typeof e.resume&&e.resume()}),setTimeout(function(){e._processNextAfterTimeout()},0)},r.prototype.pause=function(){this._stopped=!0,this._getWorkers().forEach(function(e){'function'==typeof e.pause&&e.pause()})},r.prototype.cancel=function(e,t){t=t||function(){};var n=this,r=n._workers[e];r&&r.cancel(),n._store.deleteTask(e,t)},r.prototype.push=function(e,t){var n=this,r=new i;return(t instanceof i?r=t:t&&r.on('finish',function(e){t(null,e)}).on('failed',function(e){t(e)}),!n._connected)?(n._tasksWaitingForConnect.push({input:e,ticket:r}),r):(n.filter(e,function(e,t){if(e||void 0===t||!1===t||null===t)return r.failed('input_rejected');var o=function(e){setTimeout(function(){n._queueTask(e,t,r)},0)};'function'==typeof n.id?n.id(t,function(e,t){return e?r.failed('id_error'):void o(t)}):'string'==typeof n.id&&'object'==typeof t?o(t[n.id]):o()}),r)},r.prototype._getWorkers=function(){var e=this,t=[];return Object.keys(e._workers).forEach(function(n){var r=e._workers[n];r&&-1===t.indexOf(r)&&t.push(r)}),t},r.prototype._writeNextTask=function(){var e=this;if(!e._isWriting&&e._writeQueue.length){e._isWriting=!0;var t=e._writeQueue.shift(),n=function(){e._isWriting=!1,e.setImmediate(function(){e._writeNextTask()})};if(!e._writing[t])return delete e._writing[t],n();var r=e._writing[t].task,o=e._writing[t].priority,a=e._writing[t].isNew,s=e._writing[t].id,i=e._writing[t].tickets;e._store.putTask(t,r,o,function(o){return e._writing[t]&&e._writing[t].id!==s?(e._writeQueue.unshift(t),n()):(delete e._writing[t],o?(i.failed('failed_to_put_task'),n()):void(a&&(e.length++,e._queuedPeak<e.length&&(e._queuedPeak=e.length),e._queuedTime[t]=new Date().getTime()),e._tickets[t]?e._tickets[t].push(i):e._tickets[t]=i,e.emit('task_queued',t,r),i.queued(),a&&(e._calledDrain=!1,e._calledEmpty=!1),0<e._fetching&&(e._hasMore=!0),e.batchDelayTimeout<Infinity&&(e._batchDelayTimeoutId&&clearTimeout(e._batchDelayTimeoutId),e._batchDelayTimeoutId=setTimeout(function(){e._batchDelayTimeoutId=null,e._batchTimeoutId&&clearTimeout(e._batchTimeoutId),e._batchTimeoutId=null,e._processNextIfAllowed()},e.batchDelayTimeout)),n(),e._processNextAfterTimeout()))})}},r.prototype._queueTask=function(e,t,n){var r=this,a=new i;n=n||a;var s=!1;e||(e=o.v4(),s=!0);var d=null,u=!0,c=function(){if(r._connected){var s=r._writing[e]&&r._writing[e].tickets||new l;n!==a&&s.push(n);var i=!!r._writing[e];r._writing[e]={id:o.v4(),isNew:u,task:t,priority:_,tickets:s},i||r._writeQueue.push(e),r._writeNextTask()}},p=function(){return n.accept(),r.emit('task_accepted',e,t),r.priority?void r.priority(t,function(e,t){return e?n.failed('failed_to_prioritize'):void(_=t,c())}):c()},f=function(){return d?void r.merge(d,t,function(e,r){return e?n.failed('failed_task_merge'):void(void 0===r||(t=r,p()))}):p()},_;if(s)return p();var g=r._workers[e];return r.cancelIfRunning&&g&&g.cancel(),r._writing[e]?(d=r._writing[e].task,f()):void r._store.getTask(e,function(t,o){return t?n.failed('failed_to_get'):(void 0!==o&&(u=!1),r._writing[e]?(d=r._writing[e].task,f()):void 0===o?p():void(d=o,f()))})},r.prototype._emptied=function(){this._calledEmpty||(this._calledEmpty=!0,this.emit('empty'))},r.prototype._drained=function(){this._calledDrain||(this._calledDrain=!0,this.emit('drain'))},r.prototype._getNextBatch=function(e){this._store[this.filo?'takeLastN':'takeFirstN'](this.batchSize,e)},r.prototype._processNextAfterTimeout=function(){var e=this;e.length>=e.batchSize?(e._batchTimeoutId&&(clearTimeout(e._batchTimeoutId),e._batchTimeoutId=null),e.setImmediate(function(){e._processNextIfAllowed()})):!e._batchTimeoutId&&e.batchDelay<Infinity&&(e._batchTimeoutId=setTimeout(function(){e._batchTimeoutId=null,e._processNextIfAllowed()},e.batchDelay))},r.prototype._processNextIfAllowed=function(){var e=this;if(e._connected)return e._stopped?void 0:(e._saturated=e._running+e._fetching>=e.concurrent,e._saturated?void 0:e.length?void e.precondition(function(t,n){t||!n?!e._preconditionRetryTimeoutId&&e.preconditionRetryTimeout&&(e._preconditionRetryTimeoutId=setTimeout(function(){e._preconditionRetryTimeoutId=null,e._processNextIfAllowed()},e.preconditionRetryTimeout)):e._processNext()}):void(e._hasMore||(e._emptied(),!e._running&&e._drained())))},r.prototype._processNext=function(){var e=this;e._hasMore=!1,e._fetching++,e._getNextBatch(function(t,n){e._fetching--;t||void 0===n||e._store.getLock(n,function(t,r){if(!t&&r){var o=Object.keys(r).length,a=0===o;if(e.length<o&&(e.length=o),!e._hasMore&&a)return e._emptied(),void(e._running||e._drained());if(e._hasMore&&a)return e._processNextAfterTimeout();var s={};Object.keys(r).forEach(function(t){var n=e._tickets[t];n&&(n.started(),s[t]=n,delete e._tickets[t])}),e._running++,1<e.concurrent-e._running&&e._processNextIfAllowed(),e._startBatch(r,s,n)}})})},r.prototype._startBatch=function(e,t,n){var r=this,o=Object.keys(e),a=null,s=new d({fn:r.process,batch:e,single:1===r.batchSize,failTaskOnProcessException:r.failTaskOnProcessException}),i=function(e){r._processedTotal++;var t={};if(!r._queuedTime[e])return t;var n=new Date().getTime()-r._queuedTime[e];return delete r._queuedTime[e],0<n&&(t.elapsed=n,r._processedTotalElapsed+=n,r._processedAverage=r._processedTotalElapsed/r._processedTotal),t};r.maxTimeout<Infinity&&(a=setTimeout(function(){s.failedBatch('task_timeout')},r.maxTimeout)),s.on('task_failed',function(n,a){var d=o[n];if(r._retries[d]=r._retries[d]||0,r._retries[d]++,s.cancelled||r._retries[d]>=r.maxRetries){var l=i(d);t[d]&&(t[d].failed(a),delete t[d]),r._failedTotal++,r.emit('task_failed',d,a,l)}else r.retryDelay?setTimeout(function(){r.emit('task_retry',d,r._retries[d]),r._queueTask(d,e[d],t[d])},r.retryDelay):r.setImmediate(function(){r.emit('task_retry',d,r._retries[d]),r._queueTask(d,e[d],t[d])})}),s.on('task_finish',function(e,n){var a=o[e],s=i(a);t[a]&&(t[a].finish(n),delete t[a]),r.emit('task_finish',a,n,s)}),s.on('task_progress',function(e,n){var a=o[e];t[a]&&(t[a].progress(n),delete t[a]),r.emit('task_progress',a,n)}),s.on('progress',function(e){r.emit('batch_progress',e)}),s.on('finish',function(e){r.emit('batch_finish',e)}),s.on('failed',function(e){r.emit('batch_failed',e)}),s.on('end',function(){r.length-=Object.keys(e).length,a&&clearTimeout(a);var t=function(){r._connected&&r._store.releaseLock(n,function(e){return e?setTimeout(function(){t()},1):void(r._running--,o.forEach(function(e){r._workers[e]&&!r._workers[e].active&&delete r._workers[e]}),r._processNextAfterTimeout())})};r.afterProcessDelay?setTimeout(function(){t()},r.afterProcessDelay):r.setImmediate(function(){t()})}),o.forEach(function(e){r._workers[e]=s});try{s.start(),o.forEach(function(t){r.emit('task_started',t,e[t])})}catch(t){r.emit('error',t)}},e.exports=r}).call(t,n(48).setImmediate)},function(e,t,n){(function(e,t){(function(e){'use strict';function n(e){'function'!=typeof e&&(e=new Function(''+e));for(var t=Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return f[c]=r,m(c),c++}function r(e){delete f[e]}function o(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n);}}function a(e){if(_)setTimeout(a,0,e);else{var t=f[e];if(t){_=!0;try{o(t)}finally{r(e),_=!1}}}}function s(){m=function(e){t.nextTick(function(){a(e)})}}function i(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage('','*'),e.onmessage=n,t}}function d(){var t='setImmediate$'+Math.random()+'$',n=function(n){n.source===e&&'string'==typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))};e.addEventListener?e.addEventListener('message',n,!1):e.attachEvent('onmessage',n),m=function(n){e.postMessage(t+n,'*')}}function l(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;a(t)},m=function(t){e.port2.postMessage(t)}}function u(){var e=g.documentElement;m=function(t){var n=g.createElement('script');n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function p(){m=function(e){setTimeout(a,0,e)}}if(!e.setImmediate){var c=1,f={},_=!1,g=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e),m;h=h&&h.setTimeout?h:e,'[object process]'==={}.toString.call(e.process)?s():i()?d():e.MessageChannel?l():g&&'onreadystatechange'in g.createElement('script')?u():p(),h.setImmediate=n,h.clearImmediate=r}})('undefined'==typeof self?'undefined'==typeof e?this:e:self)}).call(t,n(2),n(1))},function(e,t,n){var r=n(106),o=n(107),a=o;a.v1=r,a.v4=o,e.exports=a},function(e,t,n){function r(e,t,r){var p=t&&r||0,i=t||[];e=e||{};var c=e.node||l,f=void 0===e.clockseq?u:e.clockseq;if(null==c||null==f){var _=o();null==c&&(c=l=[1|_[0],_[1],_[2],_[3],_[4],_[5]]),null==f&&(f=u=16383&(_[6]<<8|_[7]))}var g=void 0===e.msecs?new Date().getTime():e.msecs,h=void 0===e.nsecs?d+1:e.nsecs,m=g-s+(h-d)/1e4;if(0>m&&void 0===e.clockseq&&(f=16383&f+1),(0>m||g>s)&&void 0===e.nsecs&&(h=0),1e4<=h)throw new Error('uuid.v1(): Can\'t create more than 10M uuids/sec');s=g,d=h,u=f,g+=122192928e5;var y=(1e4*(268435455&g)+h)%4294967296;i[p++]=255&y>>>24,i[p++]=255&y>>>16,i[p++]=255&y>>>8,i[p++]=255&y;var E=268435455&1e4*(g/4294967296);i[p++]=255&E>>>8,i[p++]=255&E,i[p++]=16|15&E>>>24,i[p++]=255&E>>>16,i[p++]=128|f>>>8,i[p++]=255&f;for(var b=0;6>b;++b)i[p+b]=c[b];return t?t:a(i)}var o=n(49),a=n(50),s=0,d=0,l,u;e.exports=r},function(e,t,n){var r=n(49),o=n(50);e.exports=function(e,t,n){var a=t&&n||0;'string'==typeof e&&(t='binary'===e?Array(16):null,e=null),e=e||{};var s=e.random||(e.rng||r)();if(s[6]=64|15&s[6],s[8]=128|63&s[8],t)for(var i=0;16>i;++i)t[a+i]=s[i];return t||o(s)}},function(e){e.exports=function(e){return e&&'object'==typeof e&&'function'==typeof e.copy&&'function'==typeof e.fill&&'function'==typeof e.readUInt8}},function(t,n,r){function a(e){this.fn=e.fn,this.batch=e.batch,this.single=e.single,this.active=!1,this.cancelled=!1,this.failTaskOnProcessException=e.failTaskOnProcessException}var s=r(10),i=r(7).EventEmitter,d=r(52);s.inherits(a,i),a.prototype.setup=function(){var e=this;e._taskIds=Object.keys(e.batch),e._process={},e._waiting={},e._eta=new d,e.counts={finished:0,failed:0,completed:0,total:e._taskIds.length},e.status='ready',e.progress={tasks:{},complete:0,total:e._taskIds.length,eta:''},e._taskIds.forEach(function(t,n){e._waiting[n]=!0,e.progress.tasks[n]={pct:0,complete:0,total:1}})},a.prototype.start=function(){var e=this;if(!e.active){e.setup(),e._eta.count=e.progress.total,e._eta.start(),e.active=!0,e.status='in-progress';var t=e._taskIds.map(function(t){return e.batch[t]});e.single&&(t=t[0]);try{e._process=e.fn.call(e,t,function(t,n){e.active&&(t?e.failedBatch(t):e.finishBatch(n))})}catch(t){if(e.failTaskOnProcessException)e.failedBatch(t);else throw new Error(t)}e._process=e._process||{}}},a.prototype.end=function(){this.active&&(this.status='finished',this.active=!1,this.emit('end'))},a.prototype.resume=function(){'function'==typeof this._process.resume&&this._process.resume(),this.status='in-progress'},a.prototype.pause=function(){'function'==typeof this._process.pause&&this._process.pause(),this.status='paused'},a.prototype.cancel=function(){this.cancelled=!0,'function'==typeof this._process.cancel&&this._process.cancel(),'function'==typeof this._process.abort&&this._process.abort(),this.failedBatch('cancelled')},a.prototype.failedBatch=function(e){var t=this;t.active&&(Object.keys(t._waiting).forEach(function(n){t._waiting[n]&&t.failedTask(n,e)}),t.emit('failed',e),t.end())},a.prototype.failedTask=function(e,t){var n=this;!n.active||n._waiting[e]&&(n._waiting[e]=!1,n.counts.failed++,n.counts.completed++,n.emit('task_failed',e,t))},a.prototype.finishBatch=function(e){var t=this;t.active&&(Object.keys(t._waiting).forEach(function(n){t._waiting[n]&&t.finishTask(n,e)}),t.emit('finish',e),t.end())},a.prototype.finishTask=function(e,t){var n=this;!n.active||n._waiting[e]&&(n._waiting[e]=!1,n.counts.finished++,n.counts.completed++,n.emit('task_finish',e,t))},a.prototype.progressBatch=function(e,t,n){var r=this;r.active&&(Object.keys(r._waiting).forEach(function(o){r._waiting[o]&&r.progressTask(o,e,t,n)}),r.progress.complete=0,r._taskIds.forEach(function(e,t){r.progress.complete+=r.progress.tasks[t].pct}),r._eta.done=r.progress.complete,r.progress.eta=r._eta.format('{{etah}}'),r.progress.message=n||'',r.emit('progress',r.progress))},a.prototype.progressTask=function(t,n,r,a){var s=this;!s.active||s._waiting[t]&&(s.progress.tasks[t].complete=n,s.progress.tasks[t].total=s.progress.tasks[t].total||r,s.progress.tasks[t].message=s.progress.tasks[t].message||a,s.progress.tasks[t].pct=e(0,o(1,n/r)),s.emit('task_progress',t,s.progress.tasks[t]))},t.exports=a},function(e,t,n){function r(){this.tickets=[]}var o=n(51);r.prototype._apply=function(e,t){this.tickets.forEach(function(n){n[e].apply(n,t)})},r.prototype.push=function(e){var t=this;return e instanceof r?e.tickets.forEach(function(e){t.push(e)}):void(e instanceof o&&-1===t.tickets.indexOf(e)&&t.tickets.push(e))},Object.keys(o.prototype).forEach(function(e){r.prototype[e]=function(){this._apply(e,arguments)}}),e.exports=r},function(e){function t(e){throw new Error('Cannot find module \''+e+'\'.')}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=111},function(e){function t(e,t){var n=e.map(function(e,t){return{item:e,idx:t}});return n.sort(function(e,n){return t(e.item,n.item)||e.idx-n.idx}),n.map(function(e){return e.item})}function n(){this._queue=[],this._tasks={},this._priorities={},this._running={}}var r=0;n.prototype.connect=function(e){e(null,this._queue.length)},n.prototype.getTask=function(e,t){return t(null,this._tasks[e])},n.prototype.deleteTask=function(e,t){var n=this,r=n._tasks[e];delete n._tasks[e],delete n._priorities[e],r&&n._queue.splice(n._queue.indexOf(e),1),t()},n.prototype.putTask=function(e,n,r,o){var s=this,a=s._tasks[e];s._tasks[e]=n,a||s._queue.push(e),r!==void 0&&(s._priorities[e]=r,s._queue=t(s._queue,function(e,t){return s._priorities[e]<s._priorities[t]?1:s._priorities[e]>s._priorities[t]?-1:0})),o()},n.prototype.takeFirstN=function(e,t){var n=this,o=r++;var a=n._queue.splice(0,e),s={};a.forEach(function(e){s[e]=n._tasks[e],delete n._tasks[e]}),n._running[o]=s,t(null,o)},n.prototype.takeLastN=function(e,t){var o=this,a=r++,s=o._queue.splice(-e).reverse(),i={};s.forEach(function(e){i[e]=o._tasks[e],delete o._tasks[e]}),o._running[a]=i,t(null,a)},n.prototype.getLock=function(e,t){var n=this;t(null,n._running[e])},n.prototype.getRunningTasks=function(e){var t=this;e(null,t._running)},n.prototype.releaseLock=function(e,t){var n=this;delete n._running[e],t()},e.exports=n},function(e,t,n){n(114),e.exports=n(53).setImmediate},function(e,t,n){var r=n(115),o=n(124);r(r.G+r.B,{setImmediate:o.set,clearImmediate:o.clear})},function(e,t,n){var r=n(13),o=n(53),a=n(54),s=n(117),i=n(123),d='prototype',l=function(e,t,n){var u=e&l.F,p=e&l.G,c=e&l.S,f=e&l.P,_=e&l.B,g=e&l.W,h=p?o:o[t]||(o[t]={}),m=h[d],y=p?r:c?r[t]:(r[t]||{})[d],E,b,S;for(E in p&&(n=t),n)b=!u&&y&&void 0!==y[E],b&&i(h,E)||(S=b?y[E]:n[E],h[E]=p&&'function'!=typeof y[E]?n[E]:_&&b?a(S,r):g&&y[E]==S?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n);}return new e(t,n,r)}return e.apply(this,arguments)};return t[d]=e[d],t}(S):f&&'function'==typeof S?a(Function.call,S):S,f&&((h.virtual||(h.virtual={}))[E]=S,e&l.R&&m&&!m[E]&&s(m,E,S)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e){e.exports=function(e){if('function'!=typeof e)throw TypeError(e+' is not a function!');return e}},function(e,t,n){var r=n(118),o=n(122);e.exports=n(27)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(119),o=n(120),a=n(121),s=Object.defineProperty;t.f=n(27)?Object.defineProperty:function(e,t,n){if(r(e),t=a(t,!0),r(n),o)try{return s(e,t,n)}catch(t){}if('get'in n||'set'in n)throw TypeError('Accessors not supported!');return'value'in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(26);e.exports=function(e){if(!r(e))throw TypeError(e+' is not an object!');return e}},function(e,t,n){e.exports=!n(27)&&!n(55)(function(){return 7!=Object.defineProperty(n(56)('div'),'a',{get:function(){return 7}}).a})},function(e,t,n){var r=n(26);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&'function'==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if('function'==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&'function'==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError('Can\'t convert object to primitive value')}},function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e){var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},function(e,t,n){var r=n(54),o=n(125),a=n(126),s=n(56),i=n(13),d=i.process,l=i.setImmediate,u=i.clearImmediate,p=i.MessageChannel,c=i.Dispatch,f=0,_={},g='onreadystatechange',h=function(){var e=+this;if(_.hasOwnProperty(e)){var t=_[e];delete _[e],t()}},m=function(e){h.call(e.data)},y,E,b;l&&u||(l=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return _[++f]=function(){o('function'==typeof e?e:Function(e),t)},y(f),f},u=function(e){delete _[e]},'process'==n(127)(d)?y=function(e){d.nextTick(r(h,e,1))}:c&&c.now?y=function(e){c.now(r(h,e,1))}:p?(E=new p,b=E.port2,E.port1.onmessage=m,y=r(b.postMessage,b,1)):i.addEventListener&&'function'==typeof postMessage&&!i.importScripts?(y=function(e){i.postMessage(e+'','*')},i.addEventListener('message',m,!1)):g in s('script')?y=function(e){a.appendChild(s('script'))[g]=function(){a.removeChild(this),h.call(e)}}:y=function(e){setTimeout(r(h,e,1),0)}),e.exports={set:l,clear:u}},function(e){e.exports=function(e,t,n){var r=n===void 0;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3]);}return e.apply(n,t)}},function(e,t,n){var r=n(13).document;e.exports=r&&r.documentElement},function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const n=t.QUEUE_TICK_RATE=500,r=t.EMPTY_INTERVAL_ID=-1},function(e,t,n){var r=n(130),o=n(131),a=n(31),s=n(5),i=n(59),d=n(61),l=n(62),u=n(63),p=Object.prototype,c=p.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(i(e)&&(s(e)||'string'==typeof e||'function'==typeof e.splice||d(e)||u(e)||a(e)))return!e.length;var t=o(e);if(t=='[object Map]'||t=='[object Set]')return!e.size;if(l(e))return!r(e).length;for(var n in e)if(c.call(e,n))return!1;return!0}},function(e,t,n){var r=n(30),o=r(Object.keys,Object);e.exports=o},function(e){var t=Object.prototype,n=t.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r=n(133),o=n(134);e.exports=function(e,t){return null!=e&&o(e,t,r)}},function(e){var t=Object.prototype,n=t.hasOwnProperty;e.exports=function(e,t){return null!=e&&n.call(e,t)}},function(e,t,n){var r=n(40),o=n(31),a=n(5),s=n(135),i=n(60),d=n(41);e.exports=function(e,t,n){t=r(t,e);for(var l=-1,u=t.length,p=!1,c;++l<u&&(c=d(t[l]),!!(p=null!=e&&n(e,c)));)e=e[c];return p||++l!=u?p:(u=null==e?0:e.length,!!u&&i(u)&&s(c,u)&&(a(e)||o(e)))}},function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return n=null==n?9007199254740991:n,!!n&&('number'==r||'symbol'!=r&&t.test(e))&&-1<e&&0==e%1&&e<n}},function(e,t,n){var r=n(137),o=n(155),a=n(156),s=function(e){var t={raw:e,tags:{},prefix:null,command:null,params:[]},n=0,r=0;if(64===e.charCodeAt(0)){var r=e.indexOf(' ');if(-1===r)return null;for(var o=e.slice(1,r).split(';'),a=0;a<o.length;a++){var s=o[a],i=s.split('=');t.tags[i[0]]=i[1]||!0}n=r+1}for(;32===e.charCodeAt(n);)n++;if(58===e.charCodeAt(n)){if(r=e.indexOf(' ',n),-1===r)return null;for(t.prefix=e.slice(n+1,r),n=r+1;32===e.charCodeAt(n);)n++}if(r=e.indexOf(' ',n),-1===r)return e.length>n?(t.command=e.slice(n),t):null;for(t.command=e.slice(n,r),n=r+1;32===e.charCodeAt(n);)n++;for(;n<e.length;){if(r=e.indexOf(' ',n),58===e.charCodeAt(n)){t.params.push(e.slice(n+1));break}if(-1!==r){for(t.params.push(e.slice(n,r)),n=r+1;32===e.charCodeAt(n);)n++;continue}if(-1===r){t.params.push(e.slice(n));break}}return t};e.exports={parse:s,createStream:function(e){var e=e||{},t=e.convertTimestamps||!1,n=e.parsePrefix||!1,d='',i=r.obj(function(e,r,l){d+=e.toString(),messages=d.split(/\r\n/),d=messages.pop();for(var u=0;u<messages.length;u++){var i=messages[u],p=s(i);if(null===p){this.emit('error',new Error('Invalid IRC message'));continue}var c=p.tags.time;if(c&&t){var f=a.toDate(c);p.tags.time=f?f:new Date(NaN)}n&&(p.prefix=o(p.prefix)),this.push(p)}l()});return i}}},function(e,t,n){(function(t){function r(e){s.call(this,e),this._destroyed=!1}function o(e,t,n){n(null,e)}function a(e){return function(t,n,r){return'function'==typeof t&&(r=n,n=t,t={}),'function'!=typeof n&&(n=o),'function'!=typeof r&&(r=null),e(t,n,r)}}var s=n(138),i=n(10).inherits,d=n(154);i(r,s),r.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var n=this;t.nextTick(function(){e&&n.emit('error',e),n.emit('close')})}},e.exports=a(function(e,t,n){var o=new r(e);return o._transform=t,n&&(o._flush=n),o}),e.exports.ctor=a(function(e,t,n){function o(t){return this instanceof o?void(this.options=d(e,t),r.call(this,this.options)):new o(t)}return i(o,r),o.prototype._transform=t,n&&(o.prototype._flush=n),o}),e.exports.obj=a(function(e,t,n){var o=new r(d({objectMode:!0,highWaterMark:16},e));return o._transform=t,n&&(o._flush=n),o})}).call(t,n(1))},function(e,t,n){e.exports=n(139)},function(e,t,n){function r(e,t){this.afterTransform=function(e,n){return o(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function o(e,t,n){var r=e._transformState;r.transforming=!1;var o=r.writecb;if(!o)return e.emit('error',new Error('no writecb in Transform class'));r.writechunk=null,r.writecb=null,null!==n&&n!==void 0&&e.push(n),o&&o(t);var a=e._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&e._read(a.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);i.call(this,e);var t=this._transformState=new r(e,this),n=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once('finish',function(){'function'==typeof this._flush?this._flush(function(e){s(n,e)}):s(n)})}function s(e,t){if(t)return e.emit('error',t);var n=e._writableState,r=e._readableState,o=e._transformState;if(n.length)throw new Error('calling transform done when ws.length != 0');if(o.transforming)throw new Error('calling transform done when still transforming');return e.push(null)}e.exports=a;var i=n(64),d=n(4);d.inherits=n(0),d.inherits(a,i),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,i.prototype.push.call(this,e,t)},a.prototype._transform=function(){throw new Error('not implemented')},a.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},a.prototype._read=function(){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},function(e,t){'use strict';function n(e){var t=e.length;if(0<t%4)throw new Error('Invalid string. Length must be a multiple of 4');var n=e.indexOf('=');-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function r(e,t,n){return 3*(t+n)/4-n}function o(e){for(var t=n(e),o=t[0],a=t[1],s=new p(r(e,o,a)),d=0,l=0<a?o-4:o,c=0,i;c<l;c+=4)i=u[e.charCodeAt(c)]<<18|u[e.charCodeAt(c+1)]<<12|u[e.charCodeAt(c+2)]<<6|u[e.charCodeAt(c+3)],s[d++]=255&i>>16,s[d++]=255&i>>8,s[d++]=255&i;return 2===a&&(i=u[e.charCodeAt(c)]<<2|u[e.charCodeAt(c+1)]>>4,s[d++]=255&i),1===a&&(i=u[e.charCodeAt(c)]<<10|u[e.charCodeAt(c+1)]<<4|u[e.charCodeAt(c+2)]>>2,s[d++]=255&i>>8,s[d++]=255&i),s}function a(e){return l[63&e>>18]+l[63&e>>12]+l[63&e>>6]+l[63&e]}function s(e,t,n){for(var r=[],o=t,s;o<n;o+=3)s=(16711680&e[o]<<16)+(65280&e[o+1]<<8)+(255&e[o+2]),r.push(a(s));return r.join('')}function d(e){for(var t=e.length,n=t%3,r=[],o=16383,a=0,i=t-n,d;a<i;a+=o)r.push(s(e,a,a+o>i?i:a+o));return 1==n?(d=e[t-1],r.push(l[d>>2]+l[63&d<<4]+'==')):2==n&&(d=(e[t-2]<<8)+e[t-1],r.push(l[d>>10]+l[63&d>>4]+l[63&d<<2]+'=')),r.join('')}t.byteLength=function(e){var t=n(e),r=t[0],o=t[1];return 3*(r+o)/4-o},t.toByteArray=o,t.fromByteArray=d;for(var l=[],u=[],p='undefined'==typeof Uint8Array?Array:Uint8Array,c='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',f=0,i=c.length;f<i;++f)l[f]=c[f],u[c.charCodeAt(f)]=f;u[45]=62,u[95]=63},function(e,r){r.read=function(t,r,o,a,l){var u=8*l-a-1,p=(1<<u)-1,c=p>>1,f=-7,_=o?l-1:0,i=o?-1:1,d=t[r+_],s,e;for(_+=i,s=d&(1<<-f)-1,d>>=-f,f+=u;0<f;s=256*s+t[r+_],_+=i,f-=8);for(e=s&(1<<-f)-1,s>>=-f,f+=a;0<f;e=256*e+t[r+_],_+=i,f-=8);if(0===s)s=1-c;else{if(s===p)return e?NaN:(d?-1:1)*Infinity;e+=n(2,a),s-=c}return(d?-1:1)*e*n(2,s-a)},r.write=function(r,o,a,l,u,p){var f=8*p-u-1,_=(1<<f)-1,g=_>>1,h=23===u?5.960464477539063e-8-6.617444900424222e-24:0,y=l?0:p-1,i=l?1:-1,d=0>o||0===o&&0>1/o?1:0,s,E,m;for(o=Math.abs(o),isNaN(o)||o===Infinity?(E=isNaN(o)?1:0,s=_):(s=t(Math.log(o)/Math.LN2),1>o*(m=n(2,-s))&&(s--,m*=2),o+=1<=s+g?h/m:h*n(2,1-g),2<=o*m&&(s++,m/=2),s+g>=_?(E=0,s=_):1<=s+g?(E=(o*m-1)*n(2,u),s+=g):(E=o*n(2,g-1)*n(2,u),s=0));8<=u;r[a+y]=255&E,y+=i,E/=256,u-=8);for(s=s<<u|E,f+=u;0<f;r[a+y]=255&s,y+=i,s/=256,f-=8);r[a+y-i]|=128*d}},function(e,t,n){(function(t){function r(e){e=e||{};var t=e.highWaterMark;this.highWaterMark=t||0===t?t:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||'utf8',this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(!k&&(k=n(19).StringDecoder),this.decoder=new k(e.encoding),this.encoding=e.encoding)}function a(e){return this instanceof a?void(this._readableState=new r(e,this),this.readable=!0,x.call(this)):new a(e)}function s(t,n,r,o,a){var s=u(n,r);if(s)t.emit('error',s);else if(null===r||r===void 0)n.reading=!1,n.ended||p(t,n);else if(!(n.objectMode||r&&0<r.length))a||(n.reading=!1);else if(n.ended&&!a){var d=new Error('stream.push() after EOF');t.emit('error',d)}else if(n.endEmitted&&a){var d=new Error('stream.unshift() after end event');t.emit('error',d)}else!n.decoder||a||o||(r=n.decoder.write(r)),n.length+=n.objectMode?1:r.length,a?n.buffer.unshift(r):(n.reading=!1,n.buffer.push(r)),n.needReadable&&c(t),_(t,n);return i(n)}function i(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function d(e){if(e>=w)e=w;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function l(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=d(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function u(e,t){var n=null;return R.isBuffer(t)||'string'==typeof t||null===t||void 0===t||e.objectMode||(n=new TypeError('Invalid non-string/buffer chunk')),n}function p(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,0<t.length?c(e):S(e)}function c(e){var n=e._readableState;n.needReadable=!1;n.emittedReadable||(n.emittedReadable=!0,n.sync?t.nextTick(function(){f(e)}):f(e))}function f(e){e.emit('readable')}function _(e,n){n.readingMore||(n.readingMore=!0,t.nextTick(function(){g(e,n)}))}function g(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function h(e){return function(){var t=this,n=e._readableState;n.awaitDrain--,0===n.awaitDrain&&m(e)}}function m(e){function t(e){var t=e.write(r);!1===t&&n.awaitDrain++}var n=e._readableState,r;for(n.awaitDrain=0;n.pipesCount&&null!==(r=e.read());)if(1===n.pipesCount?t(n.pipes,0,null):T(n.pipes,t),e.emit('data',r),0<n.awaitDrain)return;return 0===n.pipesCount?(n.flowing=!1,void(0<I.listenerCount(e,'data')&&E(e))):void(n.ranOut=!0)}function y(){this._readableState.ranOut&&(this._readableState.ranOut=!1,m(this))}function E(e,n){var r=e._readableState;if(r.flowing)throw new Error('Cannot switch to old mode now.');var o=n||!1,a=!1;e.readable=!0,e.pipe=x.prototype.pipe,e.on=e.addListener=x.prototype.on,e.on('readable',function(){a=!0;for(var t;!o&&null!==(t=e.read());)e.emit('data',t);null===t&&(a=!1,e._readableState.needReadable=!0)}),e.pause=function(){o=!0,this.emit('pause')},e.resume=function(){o=!1,a?t.nextTick(function(){e.emit('readable')}):this.read(0),this.emit('resume')},e.emit('readable')}function b(e,t){var r=t.buffer,a=t.length,s=!!t.decoder,d=!!t.objectMode,u;if(0===r.length)return null;if(0===a)u=null;else if(d)u=r.shift();else if(!e||e>=a)u=s?r.join(''):R.concat(r,a),r.length=0;else if(e<r[0].length){var p=r[0];u=p.slice(0,e),r[0]=p.slice(e)}else if(e===r[0].length)u=r.shift();else{u=s?'':new R(e);for(var f=0,c=0,i=r.length;c<i&&f<e;c++){var p=r[0],l=o(e-f,p.length);s?u+=p.slice(0,l):p.copy(u,f,0,l),l<p.length?r[0]=p.slice(l):r.shift(),f+=l}}return u}function S(e){var n=e._readableState;if(0<n.length)throw new Error('endReadable called on non-empty stream');!n.endEmitted&&n.calledRead&&(n.ended=!0,t.nextTick(function(){n.endEmitted||0!==n.length||(n.endEmitted=!0,e.readable=!1,e.emit('end'))}))}function T(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function O(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}e.exports=a;var A=n(143),R=n(16).Buffer;a.ReadableState=r;var I=n(7).EventEmitter;I.listenerCount||(I.listenerCount=function(e,t){return e.listeners(t).length});var x=n(66),N=n(4);N.inherits=n(0);var k;N.inherits(a,x),a.prototype.push=function(e,t){var n=this._readableState;return'string'!=typeof e||n.objectMode||(t=t||n.defaultEncoding,t!==n.encoding&&(e=new R(e,t),t='')),s(this,n,e,t,!1)},a.prototype.unshift=function(e){var t=this._readableState;return s(this,t,e,'',!0)},a.prototype.setEncoding=function(e){k||(k=n(19).StringDecoder),this._readableState.decoder=new k(e),this._readableState.encoding=e};var w=8388608;a.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var r=e,o;if(('number'!=typeof e||0<e)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return c(this),null;if(e=l(e,t),0===e&&t.ended)return o=null,0<t.length&&t.decoder&&(o=b(e,t),t.length-=o.length),0===t.length&&S(this),o;var a=t.needReadable;return t.length-e<=t.highWaterMark&&(a=!0),(t.ended||t.reading)&&(a=!1),a&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),a&&!t.reading&&(e=l(r,t)),o=0<e?b(e,t):null,null===o&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&S(this),o},a.prototype._read=function(){this.emit('error',new Error('not implemented'))},a.prototype.pipe=function(e,n){function r(e){e!==u||a()}function o(){e.end()}function a(){e.removeListener('close',i),e.removeListener('finish',d),e.removeListener('drain',_),e.removeListener('error',s),e.removeListener('unpipe',r),u.removeListener('end',o),u.removeListener('end',a),(!e._writableState||e._writableState.needDrain)&&_()}function s(t){l(),e.removeListener('error',s),0===I.listenerCount(e,'error')&&e.emit('error',t)}function i(){e.removeListener('finish',d),l()}function d(){e.removeListener('close',i),l()}function l(){u.unpipe(e)}var u=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=e;break;case 1:p.pipes=[p.pipes,e];break;default:p.pipes.push(e);}p.pipesCount+=1;var c=(!n||!1!==n.end)&&e!==t.stdout&&e!==t.stderr,f=c?o:a;p.endEmitted?t.nextTick(f):u.once('end',f),e.on('unpipe',r);var _=h(u);return e.on('drain',_),e._events&&e._events.error?A(e._events.error)?e._events.error.unshift(s):e._events.error=[s,e._events.error]:e.on('error',s),e.once('close',i),e.once('finish',d),e.emit('pipe',u),p.flowing||(this.on('readable',y),p.flowing=!0,t.nextTick(function(){m(u)})),e},a.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener('readable',y),t.flowing=!1,e&&e.emit('unpipe',this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener('readable',y),t.flowing=!1;for(var o=0;o<r;o++)n[o].emit('unpipe',this);return this}var o=O(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit('unpipe',this),this)},a.prototype.on=function(e,t){var n=x.prototype.on.call(this,e,t);if('data'!==e||this._readableState.flowing||E(this),'readable'===e&&this.readable){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&c(this,r):this.read(0))}return n},a.prototype.addListener=a.prototype.on,a.prototype.resume=function(){E(this),this.read(0),this.emit('resume')},a.prototype.pause=function(){E(this,!0),this.emit('pause')},a.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;for(var o in e.on('end',function(){if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on('data',function(o){if((t.decoder&&(o=t.decoder.write(o)),!(t.objectMode&&(null===o||void 0===o)))&&(t.objectMode||o&&o.length)){var a=r.push(o);a||(n=!0,e.pause())}}),e)'function'==typeof e[o]&&'undefined'==typeof this[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));return T(['error','close','destroy','pause','resume'],function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(){n&&(n=!1,e.resume())},r},a._fromList=b}).call(t,n(1))},function(e){e.exports=Array.isArray||function(e){return'[object Array]'==Object.prototype.toString.call(e)}},function(){},function(e,t,n){'use strict';function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function o(e,t,n){e.copy(t,n)}var a=n(18).Buffer,s=n(146);e.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return'';for(var t=this.head,n=''+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return a.alloc(0);if(1===this.length)return this.head.data;for(var t=a.allocUnsafe(e>>>0),n=this.head,r=0;n;)o(n.data,t,r),r+=n.data.length,n=n.next;return t},e}(),s&&s.inspect&&s.inspect.custom&&(e.exports.prototype[s.inspect.custom]=function(){var e=s.inspect({length:this.length});return this.constructor.name+' '+e})},function(){},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&'true'===(n+'').toLowerCase()}e.exports=function(e,t){function r(){if(!o){if(n('throwDeprecation'))throw new Error(t);else n('traceDeprecation')?console.trace(t):console.warn(t);o=!0}return e.apply(this,arguments)}if(n('noDeprecation'))return e;var o=!1;return r}}).call(t,n(2))},function(e,t,n){'use strict';function r(e){return this instanceof r?void o.call(this,e):new r(e)}e.exports=r;var o=n(70),a=n(4);a.inherits=n(0),a.inherits(r,o),r.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(33)},function(e,t,n){e.exports=n(8)},function(e,t,n){e.exports=n(32).Transform},function(e,t,n){e.exports=n(32).PassThrough},function(e,t,n){(function(t){function r(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function o(e,t){e=e||{};var n=e.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=!1===e.decodeStrings;this.decodeStrings=!r,this.defaultEncoding=e.defaultEncoding||'utf8',this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){f(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function a(e){var t=n(64);return this instanceof a||this instanceof t?void(this._writableState=new o(e,this),this.writable=!0,T.call(this)):new a(e)}function s(e,n,r){var o=new Error('write after end');e.emit('error',o),t.nextTick(function(){r(o)})}function i(e,n,r,o){var a=!0;if(!b.isBuffer(r)&&'string'!=typeof r&&null!==r&&r!==void 0&&!n.objectMode){var s=new TypeError('Invalid non-string/buffer chunk');e.emit('error',s),t.nextTick(function(){o(s)}),a=!1}return a}function d(e,t,n){return e.objectMode||!1===e.decodeStrings||'string'!=typeof t||(t=new b(t,n)),t}function l(e,t,n,o,a){n=d(t,n,o),b.isBuffer(n)&&(o='buffer');var s=t.objectMode?1:n.length;t.length+=s;var i=t.length<t.highWaterMark;return i||(t.needDrain=!0),t.writing?t.buffer.push(new r(n,o,a)):u(e,t,s,n,o,a),i}function u(e,t,n,r,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,e._write(r,o,t.onwrite),t.sync=!1}function p(e,n,r,o,a){r?t.nextTick(function(){a(o)}):a(o),e._writableState.errorEmitted=!0,e.emit('error',o)}function c(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function f(e,n){var r=e._writableState,o=r.sync,a=r.writecb;if(c(r),n)p(e,r,o,n,a);else{var s=m(e,r);s||r.bufferProcessing||!r.buffer.length||h(e,r),o?t.nextTick(function(){_(e,r,s,a)}):_(e,r,s,a)}}function _(e,t,n,r){n||g(e,t),r(),n&&y(e,t)}function g(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit('drain'))}function h(e,t){t.bufferProcessing=!0;for(var n=0;n<t.buffer.length;n++){var r=t.buffer[n],o=r.chunk,a=r.encoding,s=r.callback,i=t.objectMode?1:o.length;if(u(e,t,i,o,a,s),t.writing){n++;break}}t.bufferProcessing=!1,n<t.buffer.length?t.buffer=t.buffer.slice(n):t.buffer.length=0}function m(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function y(e,t){var n=m(e,t);return n&&(t.finished=!0,e.emit('finish')),n}function E(e,n,r){n.ending=!0,y(e,n),r&&(n.finished?t.nextTick(r):e.once('finish',r)),n.ended=!0}e.exports=a;var b=n(16).Buffer;a.WritableState=o;var S=n(4);S.inherits=n(0);var T=n(66);S.inherits(a,T),a.prototype.pipe=function(){this.emit('error',new Error('Cannot pipe. Not readable.'))},a.prototype.write=function(e,t,n){var r=this._writableState,o=!1;return'function'==typeof t&&(n=t,t=null),b.isBuffer(e)?t='buffer':!t&&(t=r.defaultEncoding),'function'!=typeof n&&(n=function(){}),r.ended?s(this,r,n):i(this,r,e,n)&&(o=l(this,r,e,t,n)),o},a.prototype._write=function(e,t,n){n(new Error('not implemented'))},a.prototype.end=function(e,t,n){var r=this._writableState;'function'==typeof e?(n=e,e=null,t=null):'function'==typeof t&&(n=t,t=null),'undefined'!=typeof e&&null!==e&&this.write(e,t),r.ending||r.finished||E(this,r,n)}}).call(t,n(1))},function(e){e.exports=function(){for(var e={},n=0,r;n<arguments.length;n++)for(var o in r=arguments[n],r)t.call(r,o)&&(e[o]=r[o]);return e};var t=Object.prototype.hasOwnProperty},function(e){e.exports=function(e){if(!e||0===e.length)return null;var t=e.indexOf('.')+1,n=e.indexOf('!')+1,r=e.indexOf('@',n)+1;if(1===n||1===r)return null;var o={};return o.raw=e,o.isServer=!1,o.nick=null,o.user=null,o.host=null,0<n?(o.nick=e.slice(0,n-1),0<r?(o.user=e.slice(n,r-1),o.host=e.slice(r)):o.user=e.slice(n)):0<r?(o.nick=e.slice(0,r-1),o.host=e.slice(r)):0<t?(o.host=e,o.isServer=!0):o.nick=e,o}},function(e,t){function n(e,t){for(var n=''+e;n.length<t;)n='0'+n;return n}t.toDate=function(e){var t=e.match(/([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?/);if(null===t)return null;var n=0,r=new Date(t[1],0,1);t[3]&&r.setMonth(t[3]-1),t[5]&&r.setDate(t[5]),t[7]&&r.setHours(t[7]),t[8]&&r.setMinutes(t[8]),t[10]&&r.setSeconds(t[10]),t[12]&&r.setMilliseconds(1e3*('0.'+t[12])),t[14]&&(n=60*t[16]+parseInt(t[17],10),n*='-'===t[15]?1:-1),n-=r.getTimezoneOffset();var o=r.getTime()+1e3*(60*n);return new Date(o)},t.fromDate=function(e){var t=e.getUTCFullYear(),r=n(e.getUTCMonth()+1,2),o=n(e.getUTCDate(),2),a=n(e.getUTCHours(),2),s=n(e.getUTCMinutes(),2),i=n(e.getUTCSeconds(),2);return t+'-'+r+'-'+o+'T'+a+':'+s+':'+i+'Z'}},function(e){'use strict';const t=(e)=>'object'==typeof e&&null!==e&&!(e instanceof RegExp)&&!(e instanceof Error)&&!(e instanceof Date);e.exports=function e(n,r,o,a){if(o=Object.assign({deep:!1,target:{}},o),a=a||new WeakMap,a.has(n))return a.get(n);a.set(n,o.target);const s=o.target;delete o.target;for(const i of Object.keys(n)){const d=n[i],l=r(i,d,n);let u=l[1];o.deep&&t(u)&&(Array.isArray(u)?u=u.map((n)=>t(n)?e(n,r,o,a):n):u=e(u,r,o,a)),s[l[0]]=u}return s}},function(e){'use strict';function t(e){let t=!1,n=!1,r=!1;for(let o=0;o<e.length;o++){const a=e[o];t&&/[a-zA-Z]/.test(a)&&a.toUpperCase()===a?(e=e.substr(0,o)+'-'+e.substr(o),t=!1,r=n,n=!0,o++):n&&r&&/[a-zA-Z]/.test(a)&&a.toLowerCase()===a?(e=e.substr(0,o-1)+'-'+e.substr(o-1),r=n,n=!1,t=!0):(t=a.toLowerCase()===a,r=n,n=a.toUpperCase()===a)}return e}e.exports=function(e){if(e=1<arguments.length?Array.from(arguments).map((e)=>e.trim()).filter((e)=>e.length).join('-'):e.trim(),0===e.length)return'';if(1===e.length)return e.toLowerCase();if(/^[a-z0-9]+$/.test(e))return e;const n=e!==e.toLowerCase();return n&&(e=t(e)),e.replace(/^[_.\- ]+/,'').toLowerCase().replace(/[_.\- ]+(\w|$)/g,(e,t)=>t.toUpperCase())}},function(e){'use strict';class t{constructor(e){if(e=Object.assign({},e),!(e.maxSize&&0<e.maxSize))throw new TypeError('`maxSize` must be a number greater than 0');this.maxSize=e.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){const t=this.oldCache.get(e);return this._set(e,t),t}}set(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}delete(e){this.cache.delete(e)&&this._size--,this.oldCache.delete(e)}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const e of this)yield e[0]}*values(){for(const e of this)yield e[1]}*[Symbol.iterator](){for(const e of this.cache)yield e;for(const e of this.oldCache)this.cache.has(e[0])||(yield e)}get size(){let e=0;for(const t of this.oldCache)this.cache.has(t[0])||e++;return this._size+e}}e.exports=t},function(e,t,n){var r=n(6),o=n(161);e.exports=function(e){return o(r(e).toLowerCase())}},function(e,t,n){var r=n(162),o=r('toUpperCase');e.exports=o},function(e,t,n){var r=n(163),o=n(73),a=n(165),s=n(6);e.exports=function(e){return function(t){t=s(t);var n=o(t)?a(t):void 0,i=n?n[0]:t.charAt(0),d=n?r(n,1).join(''):t.slice(1);return i[e]()+d}}},function(e,t,n){var r=n(164);e.exports=function(e,t,n){var o=e.length;return n=void 0===n?o:n,!t&&n>=o?e:r(e,t,n)}},function(e){e.exports=function(e,t,n){var r=-1,o=e.length;0>t&&(t=-t>o?0:o+t),n=n>o?o:n,0>n&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(o);++r<o;)a[r]=e[r+t];return a}},function(e,t,n){var r=n(166),o=n(73),a=n(167);e.exports=function(e){return o(e)?a(e):r(e)}},function(e){e.exports=function(e){return e.split('')}},function(e){var t='\\ud800-\\udfff',n='(?:'+('['+('\\u0300-\\u036f'+'\\ufe20-\\ufe2f'+'\\u20d0-\\u20ff')+']')+'|'+'\\ud83c[\\udffb-\\udfff]'+')'+'?',r='['+'\\ufe0e\\ufe0f'+']?',o=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]?|[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g;e.exports=function(e){return e.match(o)||[]}},function(e,t,n){var r=n(169),o=n(170),a=n(171),s=/['’]/g;e.exports=function(e){return function(t){return r(a(o(t).replace(s,'')),e,'')}}},function(e){e.exports=function(e,t,n,r){var o=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++o]);++o<a;)n=t(n,e[o],o,e);return n}},function(e){e.exports=function(e){return e}},function(e,t,n){var r=n(172),o=n(173),a=n(6),s=n(174);e.exports=function(e,t,n){return e=a(e),t=n?void 0:t,void 0===t?o(e)?s(e):r(e):e.match(t)||[]}},function(e){var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(t)||[]}},function(e){var t=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return t.test(e)}},function(e){var t='\\ud800-\\udfff',n='\\u2700-\\u27bf',r='a-z\\xdf-\\xf6\\xf8-\\xff',o='A-Z\\xc0-\\xd6\\xd8-\\xde',a='\\xac\\xb1\\xd7\\xf7'+'\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf'+'\\u2000-\\u206f'+' \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000',s='[\'\u2019]',i='\\d+',d='['+r+']',l='[^'+t+a+i+n+r+o+']',u='['+o+']',p='(?:'+s+'(?:d|ll|m|re|s|t|ve))?',c='(?:'+s+'(?:D|LL|M|RE|S|T|VE))?',f='(?:'+('['+('\\u0300-\\u036f'+'\\ufe20-\\ufe2f'+'\\u20d0-\\u20ff')+']')+'|'+'\\ud83c[\\udffb-\\udfff]'+')'+'?',_='['+'\\ufe0e\\ufe0f'+']?',g=RegExp([u+'?'+d+'+'+p+'(?='+'[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$'+')','(?:'+u+'|'+l+')'+'+'+c+'(?='+'[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$'+')',u+'?'+('(?:'+d+'|'+l+')')+'+'+p,u+'+'+c,'\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])','\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])',i,'(?:'+'[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]'+')'+(_+f+('(?:'+'\\u200d'+'(?:'+'[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]'+')'+_+f+')*'))].join('|'),'g');e.exports=function(e){return e.match(g)||[]}},function(e,t,n){var r=n(6);e.exports=function(){var e=arguments,t=r(e[0]);return 3>e.length?t:t.replace(e[1],e[2])}},function(e,t,n){'use strict';function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0}),t.userState=t.userNoticeEvent=t.userNoticeMessageParameters=t.userNotice=t.roomState=t.privateMessageCheerEvent=t.privateMessage=t.globalUserState=t.clearChat=void 0;var a=n(58),s=o(a),i=n(35),d=o(i),l=n(177),u=o(l),p=n(34),c=o(p),f=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++)for(var r in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},_=n(3),g=r(_),h=n(72),m=r(h);const y=(e)=>f({},e,{badges:m.badges(e.badges),bits:m.generalNumber(e.bits),emotes:m.emotes(e.emotes),emoteSets:m.emoteSets(e.emoteSets),userType:m.userType(e.userType)});t.clearChat=(e)=>f({},e,{banReason:m.generalString(e.banReason),banDuration:m.generalNumber(e.banDuration)}),t.globalUserState=(e)=>f({},e,{emoteSets:m.emoteSets(e.emoteSets),userType:m.userType(e.userType),username:(0,d.default)(e.displayName)}),t.privateMessage=(...e)=>y(...e),t.privateMessageCheerEvent=(e)=>(0,u.default)(e.bits,0)?{event:g.EVENTS.CHEER,bits:parseInt(e.bits,10)}:{},t.roomState=(e)=>Object.entries(e).reduce((e,[t,n])=>'followersOnly'===t?f({},e,{[t]:m.followersOnly(n)}):'broadcasterLang'===t?f({},e,{[t]:m.generalString(n)}):'slow'===t?f({},e,{[t]:m.generalNumber(n)}):'emoteOnly'===t||'r9k'===t||'subsOnly'===t?f({},e,{[t]:m.generalBoolean(n)}):f({},e,{[t]:n}),{}),t.userNotice=(...e)=>y(...e),t.userNoticeMessageParameters=(e)=>Object.entries(e).reduce((e,[t,n])=>{const[,r]=g.MESSAGE_PARAMETER_PREFIX_RE.exec(t)||[];return'Months'===r||'MassGiftCount'===r||'PromoGiftTotal'===r||'SenderCount'===r||'ViewerCount'===r?f({},e,{[(0,c.default)(r)]:m.generalNumber(n)}):void 0===r?e:f({},e,{[(0,c.default)(r)]:m.generalString(n)})},{}),t.userNoticeEvent=(e)=>{switch(e.msgId){case g.USER_NOTICE_MESSAGE_IDS.ANON_GIFT_PAID_UPGRADE:return g.EVENTS.ANON_GIFT_PAID_UPGRADE;case g.USER_NOTICE_MESSAGE_IDS.GIFT_PAID_UPGRADE:return g.EVENTS.GIFT_PAID_UPGRADE;case g.USER_NOTICE_MESSAGE_IDS.RESUBSCRIPTION:return g.EVENTS.RESUBSCRIPTION;case g.USER_NOTICE_MESSAGE_IDS.RAID:return g.EVENTS.RAID;case g.USER_NOTICE_MESSAGE_IDS.RITUAL:return g.EVENTS.RITUAL;case g.USER_NOTICE_MESSAGE_IDS.SUBSCRIPTION:return g.EVENTS.SUBSCRIPTION;case g.USER_NOTICE_MESSAGE_IDS.SUBSCRIPTION_GIFT:return g.EVENTS.SUBSCRIPTION_GIFT;case g.USER_NOTICE_MESSAGE_IDS.SUBSCRIPTION_GIFT_COMMUNITY:return g.EVENTS.SUBSCRIPTION_GIFT_COMMUNITY;default:return(0,s.default)(e.msgId);}},t.userState=y},function(e,t,n){var r=n(178),o=n(179),a=o(r);e.exports=a},function(e){e.exports=function(e,t){return e>t}},function(e,t,n){var r=n(28);e.exports=function(e){return function(t,n){return'string'==typeof t&&'string'==typeof n||(t=r(t),n=r(n)),e(t,n)}}},function(e){e.exports=function(e){return null==e}},function(e,t,n){var r=n(15),o=n(20);e.exports=function(e){return!0===e||!1===e||o(e)&&r(e)=='[object Boolean]'}},function(e,t,n){var r=n(36),o=n(21),a=n(37),s=n(38),i=Object.prototype,d=i.hasOwnProperty,l=r(function(e,t){e=Object(e);var n=-1,r=t.length,l=2<r?t[2]:void 0;for(l&&a(t[0],t[1],l)&&(r=1);++n<r;)for(var u=t[n],p=s(u),c=-1,f=p.length;++c<f;){var _=p[c],g=e[_];(void 0===g||o(g,i[_])&&!d.call(e,_))&&(e[_]=u[_])}return e});e.exports=l},function(e){e.exports=function(e){return e}},function(t,n,r){var o=r(76),a=e;t.exports=function(e,t,n){return t=a(void 0===t?e.length-1:t,0),function(){for(var r=arguments,s=-1,i=a(r.length-t,0),d=Array(i);++s<i;)d[s]=r[t+s];s=-1;for(var l=Array(t+1);++s<t;)l[s]=r[s];return l[t]=n(d),o(e,this,l)}}},function(e){e.exports=function(e){return e}},function(e){function t(e,t,n){var r=n.length;if(null==e)return!r;for(e=Object(e);r--;){var o=n[r],a=t[o],s=e[o];if(s===void 0&&!(o in e)||!a(s))return!1}return!0}e.exports=t},function(e,t,n){var r=n(30),o=r(Object.keys,Object);e.exports=o},function(e,t,n){var r=n(189),a=n(37),s=n(190),i=parseFloat,d=Math.random;e.exports=function(e,t,n){if(n&&'boolean'!=typeof n&&a(e,t,n)&&(t=n=void 0),void 0===n&&('boolean'==typeof t?(n=t,t=void 0):'boolean'==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=s(e),void 0===t?(t=e,e=0):t=s(t)),e>t){var l=e;e=t,t=l}if(n||e%1||t%1){var u=d();return o(e+u*(t-e+i('1e-'+((u+'').length-1))),t)}return r(e,t)}},function(e){var n=Math.random;e.exports=function(e,r){return e+t(n()*(r-e+1))}},function(e,t,n){var r=n(28),o=1/0;e.exports=function(e){if(!e)return 0===e?e:0;if(e=r(e),e===o||e===-o){var t=0>e?-1:1;return t*17976931348623157e292}return e===e?e:0}},function(e,t,n){'use strict';function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,'__esModule',{value:!0}),t.resolvers=t.factory=void 0;var o=n(34),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n(43),i=r(s),d=n(3),l=r(d);t.factory=(e)=>{Object.entries(l.CHAT_COMMANDS).forEach(([t,n])=>{e[(0,a.default)(t)]=(t,...r)=>e.say(t,`/${n}`,...r)})},t.resolvers=(e)=>(t,n)=>{const[,r]=/^\/(.+)/.exec(n)||[];return r===l.CHAT_COMMANDS.BAN?[i.resolveOnEvent(e,`${l.EVENTS.BAN_SUCCESS}/${t}`),i.resolveOnEvent(e,`${l.EVENTS.ALREADY_BANNED}/${t}`)]:r===l.CHAT_COMMANDS.CLEAR?[i.resolveOnEvent(e,`${l.EVENTS.CLEAR_CHAT}/${t}`)]:r===l.CHAT_COMMANDS.COLOR?[i.resolveOnEvent(e,`${l.EVENTS.COLOR_CHANGED}/${t}`)]:r===l.CHAT_COMMANDS.COMMERCIAL?[i.resolveOnEvent(e,`${l.EVENTS.COMMERCIAL_SUCCESS}/${t}`)]:r===l.CHAT_COMMANDS.EMOTE_ONLY?[i.resolveOnEvent(e,`${l.EVENTS.EMOTE_ONLY_ON}/${t}`),i.resolveOnEvent(e,`${l.EVENTS.ALREADY_EMOTE_ONLY_ON}/${t}`)]:r===l.CHAT_COMMANDS.EMOTE_ONLY_OFF?[i.resolveOnEvent(e,`${l.EVENTS.EMOTE_ONLY_OFF}/${t}`),i.resolveOnEvent(e,`${l.EVENTS.ALREADY_EMOTE_ONLY_OFF}/${t}`)]:r===l.CHAT_COMMANDS.FOLLOWERS_ONLY?[i.resolveOnEvent(e,`${l.EVENTS.FOLLOWERS_ON_ZERO}/${t}`),i.resolveOnEvent(e,`${l.EVENTS.FOLLOWERS_ON}/${t}`)]:r===l.CHAT_COMMANDS.FOLLOWERS_ONLY_OFF?[i.resolveOnEvent(e,`${l.EVENTS.FOLLOWERS_OFF}/${t}`)]:r===l.CHAT_COMMANDS.HELP?[i.resolveOnEvent(e,`${l.EVENTS.COMMANDS_AVAILABLE}/${t}`)]:r===l.CHAT_COMMANDS.HOST?[i.resolveOnEvent(e,`${l.EVENTS.HOST_ON}/${t}`)]:r===l.CHAT_COMMANDS.MARKER?[Promise.resolve()]:r===l.CHAT_COMMANDS.MOD?[i.resolveOnEvent(e,`${l.EVENTS.MOD_SUCCESS}/${t}`),i.resolveOnEvent(e,`${l.EVENTS.BAD_MOD_MOD}/${t}`)]:r===l.CHAT_COMMANDS.MODS?[i.resolveOnEvent(e,`${l.EVENTS.ROOM_MODS}/${t}`)]:r===l.CHAT_COMMANDS.R9K?[i.resolveOnEvent(e,`${l.EVENTS.R9K_ON}/${t}`),i.resolveOnEvent(e,`${l.EVENTS.ALREADY_R9K_ON}/${t}`)]:r===l.CHAT_COMMANDS.R9K_OFF?[i.resolveOnEvent(e,`${l.EVENTS.R9K_OFF}/${t}`),i.resolveOnEvent(e,`${l.EVENTS.ALREADY_R9K_OFF}/${t}`)]:r===l.CHAT_COMMANDS.RAID?[Promise.resolve()]:r===l.CHAT_COMMANDS.SLOW?[i.resolveOnEvent(e,`${l.EVENTS.SLOW_ON}/${t}`)]:r===l.CHAT_COMMANDS.SLOW_OFF?[i.resolveOnEvent(e,`${l.EVENTS.SLOW_OFF}/${t}`)]:r===l.CHAT_COMMANDS.SUBSCRIBERS?[i.resolveOnEvent(e,`${l.EVENTS.SUBS_ON}/${t}`),i.resolveOnEvent(e,`${l.EVENTS.ALREADY_SUBS_ON}/${t}`)]:r===l.CHAT_COMMANDS.SUBSCRIBERS_OFF?[i.resolveOnEvent(e,`${l.EVENTS.SUBS_OFF}/${t}`),i.resolveOnEvent(e,`${l.EVENTS.ALREADY_SUBS_OFF}/${t}`)]:r===l.CHAT_COMMANDS.TIMEOUT?[i.resolveOnEvent(e,`${l.EVENTS.TIMEOUT_SUCCESS}/${t}`)]:r===l.CHAT_COMMANDS.UNBAN?[i.resolveOnEvent(e,`${l.EVENTS.UNBAN_SUCCESS}/${t}`),i.resolveOnEvent(e,`${l.EVENTS.BAD_UNBAN_NO_BAN}/${t}`)]:r===l.CHAT_COMMANDS.UNHOST?[i.resolveOnEvent(e,`${l.EVENTS.HOST_OFF}/${t}`)]:r===l.CHAT_COMMANDS.UNMOD?[i.resolveOnEvent(e,`${l.EVENTS.HOST_OFF}/${t}`)]:r===l.CHAT_COMMANDS.UNRAID?[i.resolveOnEvent(e,`${l.EVENTS.UNRAID_SUCCESS}/${t}`)]:[i.resolveOnEvent(e,`${l.COMMANDS.USER_STATE}/${t}`)]}},function(e,t,n){'use strict';function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,'__esModule',{value:!0});var s=n(35),i=o(s),d=n(193),l=o(d),u=n(23),p=o(u),c=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++)for(var r in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},f=n(24),_=o(f),g=n(195),h=o(g),m=n(82),y=r(m),E=n(200),b=r(E),S=n(229),T=r(S);class O{constructor(e={}){this._readyState=1,this.options=e,this._log=(0,_.default)(c({scope:'Api'},this.options.log))}set options(e){this._options=b.apiOptions(e)}get options(){return this._options}get readyState(){return this._readyState}get status(){return this._status}updateOptions(e){const{clientId:t,token:n}=this.options;this.options=c({},e,{clientId:t,token:n})}initialize(e){return e&&(this.options=c({},this.options,e)),e||2!==this.readyState?this.get().then((e)=>(this._readyState=2,this._status=e,e)):Promise.resolve()}hasScope(e){return new Promise((t,n)=>2===this.readyState?(0,l.default)((0,p.default)(this.status,'token.authorization.scopes',[]),e)?t(!0):n(!1):n(!1))}get(e,t={}){return this._handleFetch(e,t)}post(e,t={}){return this._handleFetch(e,c({},t,{method:'post'}))}put(e,t={}){return this._handleFetch(e,c({},t,{method:'put'}))}_isVersionHelix(e){return(0,i.default)(e)===T.HELIX_VERSION}_getBaseUrl({version:e}={}){return this._isVersionHelix(e)?T.HELIX_URL_ROOT:T.KRAKEN_URL_ROOT}_getHeaders({version:e}={}){const{clientId:t,token:n}=this.options,r=this._isVersionHelix(e),o=r?T.HELIX_AUTHORIZATION_HEADER:T.KRAKEN_AUTHORIZATION_HEADER,a=`${o} ${n}`,s=r?{}:{Accept:'application/vnd.twitchtv.v5+json'};if(!t)return c({},s,{Authorization:a});return n?c({},s,{"Client-ID":t,Authorization:a}):c({},s,{"Client-ID":t})}_handleFetch(e='',t={}){const n=this._log.startTimer(),{version:r}=t,o=a(t,['version']),s=this._getBaseUrl({version:r}),i=this._getHeaders({version:r}),d=`${s}/${e}`,l=`${o.method||'GET'} ${s}`,u=()=>(0,h.default)(d,c({},o,{headers:c({},o.headers,i)})).then((e)=>(n.done({message:l}),e));return u().catch((e)=>{if(n.done({level:'error',message:e.body}),e instanceof y.AuthenticationError)return this.options.onAuthenticationFailure().then((e)=>this.options=c({},this.options,{token:e})).then(()=>this._log.info('Retrying (with new credentials)')).then(()=>u());throw e})}}t.default=O},function(e,t,n){var r=n(194);e.exports=function(e,t){var n=null==e?0:e.length;return!!n&&-1<r(e,t,0)}},function(e){e.exports=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}},function(e,t,n){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var o=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++)for(var r in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},a=n(196),s=r(a),i=n(198),d=r(i),l=n(44),u=n(199),p=r(u);t.default=(e,t={},n={})=>{const r=t.body&&!(t.body instanceof d.default)&&'object'==typeof t.body,a=r?JSON.stringify(t.body):t.body,i=r?o({},t.headers,{"Content-Type":'application/json'}):t.headers,u='object'==typeof t.search?`?${(0,l.stringify)(t.search,n)}`:'';return(0,s.default)(`${e}${u}`,o({},t,{method:t.method||'get',search:void 0,headers:i,body:a})).then(p.default)}},function(e,t,n){'use strict';n(197),e.exports=window.fetch},function(){(function(e){'use strict';function t(e){if('string'!=typeof e&&(e+=''),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError('Invalid character in header field name');return e.toLowerCase()}function n(e){return'string'!=typeof e&&(e+=''),e}function o(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return y.iterable&&(t[Symbol.iterator]=function(){return t}),t}function a(e){this.map={},e instanceof a?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function s(e){return e.bodyUsed?Promise.reject(new TypeError('Already read')):void(e.bodyUsed=!0)}function i(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function d(e){var t=new FileReader,n=i(t);return t.readAsArrayBuffer(e),n}function l(e){var t=new FileReader,n=i(t);return t.readAsText(e),n}function u(e){for(var t=new Uint8Array(e),n=Array(t.length),o=0;o<t.length;o++)n[o]=r(t[o]);return n.join('')}function p(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function c(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,!e)this._bodyText='';else if('string'==typeof e)this._bodyText=e;else if(y.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(y.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(y.arrayBuffer&&y.blob&&b(e))this._bodyArrayBuffer=p(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else if(y.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||S(e)))this._bodyArrayBuffer=p(e);else throw new Error('unsupported BodyInit type');this.headers.get('content-type')||('string'==typeof e?this.headers.set('content-type','text/plain;charset=UTF-8'):this._bodyBlob&&this._bodyBlob.type?this.headers.set('content-type',this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set('content-type','application/x-www-form-urlencoded;charset=UTF-8'))},y.blob&&(this.blob=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error('could not read FormData body as blob');else return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?s(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(u(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error('could not read FormData body as text');else return Promise.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e){var t=e.toUpperCase();return-1<T.indexOf(t)?t:e}function _(e,t){t=t||{};var n=t.body;if(e instanceof _){if(e.bodyUsed)throw new TypeError('Already read');this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new a(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=e+'';if(this.credentials=t.credentials||this.credentials||'omit',(t.headers||!this.headers)&&(this.headers=new a(t.headers)),this.method=f(t.method||this.method||'GET'),this.mode=t.mode||this.mode||null,this.referrer=null,('GET'===this.method||'HEAD'===this.method)&&n)throw new TypeError('Body not allowed for GET or HEAD requests');this._initBody(n)}function g(e){var t=new FormData;return e.trim().split('&').forEach(function(e){if(e){var n=e.split('='),r=n.shift().replace(/\+/g,' '),o=n.join('=').replace(/\+/g,' ');t.append(decodeURIComponent(r),decodeURIComponent(o))}}),t}function h(e){var t=new a;return e.split(/\r?\n/).forEach(function(e){var n=e.split(':'),r=n.shift().trim();if(r){var o=n.join(':').trim();t.append(r,o)}}),t}function m(e,t){t||(t={}),this.type='default',this.status='status'in t?t.status:200,this.ok=200<=this.status&&300>this.status,this.statusText='statusText'in t?t.statusText:'OK',this.headers=new a(t.headers),this.url=t.url||'',this._initBody(e)}if(!e.fetch){var y={searchParams:'URLSearchParams'in e,iterable:'Symbol'in e&&'iterator'in Symbol,blob:'FileReader'in e&&'Blob'in e&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:'FormData'in e,arrayBuffer:'ArrayBuffer'in e};if(y.arrayBuffer)var E=['[object Int8Array]','[object Uint8Array]','[object Uint8ClampedArray]','[object Int16Array]','[object Uint16Array]','[object Int32Array]','[object Uint32Array]','[object Float32Array]','[object Float64Array]'],b=function(e){return e&&DataView.prototype.isPrototypeOf(e)},S=ArrayBuffer.isView||function(e){return e&&-1<E.indexOf(Object.prototype.toString.call(e))};a.prototype.append=function(e,r){e=t(e),r=n(r);var o=this.map[e];this.map[e]=o?o+','+r:r},a.prototype['delete']=function(e){delete this.map[t(e)]},a.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},a.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},a.prototype.set=function(e,r){this.map[t(e)]=n(r)},a.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},a.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),o(e)},a.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),o(e)},a.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),o(e)},y.iterable&&(a.prototype[Symbol.iterator]=a.prototype.entries);var T=['DELETE','GET','HEAD','OPTIONS','POST','PUT'];_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},c.call(_.prototype),c.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:''});return e.type='error',e};var O=[301,302,303,307,308];m.redirect=function(e,t){if(-1===O.indexOf(t))throw new RangeError('Invalid status code');return new m(null,{status:t,headers:{location:e}})},e.Headers=a,e.Request=_,e.Response=m,e.fetch=function(e,t){return new Promise(function(n,r){var o=new _(e,t),a=new XMLHttpRequest;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:h(a.getAllResponseHeaders()||'')};e.url='responseURL'in a?a.responseURL:e.headers.get('X-Request-URL');var t='response'in a?a.response:a.responseText;n(new m(t,e))},a.onerror=function(){r(new TypeError('Network request failed'))},a.ontimeout=function(){r(new TypeError('Network request failed'))},a.open(o.method,o.url,!0),'include'===o.credentials&&(a.withCredentials=!0),'responseType'in a&&y.blob&&(a.responseType='blob'),o.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send('undefined'==typeof o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}})('undefined'==typeof self?this:self)},function(e){'use strict';e.exports=window.FormData},function(e,t,n){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var o=n(71),a=r(o),s=n(82),i=r(s);t.default=(e)=>e.json().then((t)=>{if(!e.ok)throw(0,i.default)(e,t);return(0,a.default)(t,{deep:!0})})},function(e,t,n){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0}),t.apiOptions=void 0;var o=n(75),a=r(o),s=n(14),i=r(s),d=n(201),l=r(d),u=n(77),p=r(u),c=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++)for(var r in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},f=n(78),_=r(f);t.apiOptions=(e)=>{const t={onAuthenticationFailure:i.default},n=c({},t,{clientId:a.default}),r=c({},t,{token:a.default}),o=(0,l.default)({},c({},e),{onAuthenticationFailure:()=>Promise.reject()});return(0,_.default)((0,p.default)(o,n)||(0,p.default)(o,r),'[twitch-js/Api] options: Expected valid options'),o}},function(e,t,n){var r=n(76),o=n(36),a=n(202),s=n(227),i=o(function(e){return e.push(void 0,a),r(s,void 0,e)});e.exports=i},function(e,t,n){function r(e,t,n,s,i,d){return a(e)&&a(t)&&(d.set(t,e),o(e,t,void 0,r,d),d['delete'](t)),e}var o=n(83),a=n(9);e.exports=r},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(204),a=n(205),s=n(206),i=n(207),d=n(208);r.prototype.clear=o,r.prototype['delete']=a,r.prototype.get=s,r.prototype.has=i,r.prototype.set=d,e.exports=r},function(e){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(22),o=Array.prototype,a=o.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);if(0>n)return!1;var o=t.length-1;return n==o?t.pop():a.call(t,n,1),--this.size,!0}},function(e,t,n){var r=n(22);e.exports=function(e){var t=this.__data__,n=r(t,e);return 0>n?void 0:t[n][1]}},function(e,t,n){var r=n(22);e.exports=function(e){return-1<r(this.__data__,e)}},function(e,t,n){var r=n(22);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return 0>o?(++this.size,n.push([e,t])):n[o][1]=t,this}},function(e,t,n){var r=n(210),o=function(){try{var e=r(Object,'defineProperty');return e({},'',{}),e}catch(t){}}();e.exports=o},function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(212),o=r();e.exports=o},function(e){e.exports=function(e){return function(t,n,r){for(var o=-1,a=Object(t),s=r(t),i=s.length;i--;){var d=s[e?i:++o];if(!1===n(a[d],d,a))break}return t}}},function(e,t,n){var r=n(84),o=n(214),a=n(216),s=n(219),i=n(220),d=n(31),l=n(5),u=n(222),p=n(61),c=n(14),f=n(9),_=n(223),g=n(63),h=n(86),m=n(224);e.exports=function(e,t,n,y,E,b,S){var T=h(e,n),O=h(t,n),A=S.get(O);if(A)return void r(e,n,A);var R=b?b(T,O,n+'',e,t,S):void 0,I=R===void 0;if(I){var x=l(O),N=!x&&p(O),k=!x&&!N&&g(O);R=O,x||N||k?l(T)?R=T:u(T)?R=s(T):N?(I=!1,R=o(O,!0)):k?(I=!1,R=a(O,!0)):R=[]:_(O)||d(O)?(R=T,d(T)?R=m(T):(!f(T)||y&&c(T))&&(R=i(O))):I=!1}I&&(S.set(O,R),E(R,O,y,b,S),S['delete'](O)),r(e,n,R)}},function(e,t,n){(function(e){var r=n(12),o='object'==typeof t&&t&&!t.nodeType&&t,a=o&&'object'==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o,i=s?r.Buffer:void 0,d=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=d?d(n):new e.constructor(n);return e.copy(r),r}}).call(t,n(215)(e))},function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],!e.children&&(e.children=[]),Object.defineProperty(e,'loaded',{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,'id',{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){var r=n(217);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){var r=n(218);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t,n){var r=n(12),o=r.Uint8Array;e.exports=o},function(e){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t,n){var r=n(221),o=n(85),a=n(62);e.exports=function(e){return'function'!=typeof e.constructor||a(e)?{}:r(o(e))}},function(e,t,n){var r=n(9),o=Object.create,a=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=a},function(e,t,n){var r=n(59),o=n(20);e.exports=function(e){return o(e)&&r(e)}},function(e,t,n){var r=n(15),o=n(85),a=n(20),s=Function.prototype,i=Object.prototype,d=s.toString,l=i.hasOwnProperty,u=d.call(Object);e.exports=function(e){if(!a(e)||r(e)!='[object Object]')return!1;var t=o(e);if(null===t)return!0;var n=l.call(t,'constructor')&&t.constructor;return'function'==typeof n&&n instanceof n&&d.call(n)==u}},function(e,t,n){var r=n(225),o=n(38);e.exports=function(e){return r(e,o(e))}},function(e,t,n){var r=n(226),o=n(39);e.exports=function(e,t,n,a){var s=!n;n||(n={});for(var i=-1,d=t.length;++i<d;){var l=t[i],u=a?a(n[l],e[l],l,n,e):void 0;u===void 0&&(u=e[l]),s?o(n,l,u):r(n,l,u)}return n}},function(e,t,n){function r(e,t,n){var r=e[t];i.call(e,t)&&a(r,n)&&(n!==void 0||t in e)||o(e,t,n)}var o=n(39),a=n(21),s=Object.prototype,i=s.hasOwnProperty;e.exports=r},function(e,t,n){var r=n(83),o=n(228),a=o(function(e,t,n,o){r(e,t,n,o)});e.exports=a},function(e,t,n){var r=n(36),o=n(37);e.exports=function(e){return r(function(t,n){var r=-1,a=n.length,s=1<a?n[a-1]:void 0,i=2<a?n[2]:void 0;for(s=3<e.length&&'function'==typeof s?(a--,s):void 0,i&&o(n[0],n[1],i)&&(s=3>a?void 0:s,a=1),t=Object(t);++r<a;){var d=n[r];d&&e(t,d,r,s)}return t})}},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const n=t.HELIX_VERSION='helix',r=t.HELIX_URL_ROOT='https://api.twitch.tv/helix',o=t.HELIX_AUTHORIZATION_HEADER='Bearer',a=t.KRAKEN_VERSION='kraken',s=t.KRAKEN_URL_ROOT='https://api.twitch.tv/kraken',i=t.KRAKEN_AUTHORIZATION_HEADER='OAuth',d=t.READY_STATES={0:'NOT_READY',1:'READY',2:'INITIALIZED'}}])['default']});